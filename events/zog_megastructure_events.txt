namespace = zog_megastructure_events

###################################
### Uninhabitable planet cracked
###################################

country_event = {
    id = zog_megastructure_events.1
    title = zog_megastructure_events.1.title
    desc = zog_megastructure_events.1.desc
    picture = GFX_evt_planet_cracked
    show_sound = event_super_explosion
    is_triggered_only = yes
    location = from.planet

    trigger = {
        from = { is_megastructure_type = "zog_uninhabitable_planet_cracking_0" }
    }

    immediate = {
        from.planet = {
            save_event_target_as = "space_monsters_target_planet"
        }
        from.owner = {
            if = {
                limit = { check_variable = { which = "uninhabitable_planets_cracked" value < 1 } }
                set_variable = { which = "uninhabitable_planets_cracked" value = 1 }
                else = { change_variable = { which = "uninhabitable_planets_cracked" value = 1 } }
            }
            random_list = {
                 5 = { country_event = { id = zog_enemy_event.5 days = 15 random = 5 } }
                 8 = { country_event = { id = zog_enemy_event.5 days = 30 random = 10 } }
                10 = { country_event = { id = zog_enemy_event.5 days = 45 random = 15 } }
                13 = { country_event = { id = zog_enemy_event.5 days = 60 random = 20 } }
                15 = { country_event = { id = zog_enemy_event.5 days = 75 random = 25 } }
                13 = { country_event = { id = zog_enemy_event.5 days = 90 random = 20 } }
                10 = { country_event = { id = zog_enemy_event.5 days = 110 random = 15 } }
                 8 = { country_event = { id = zog_enemy_event.5 days = 130 random = 10 } }
                 5 = { country_event = { id = zog_enemy_event.5 days = 155 random = 5 } }
                13 = {}
            }
        }
    }

    option = {
        name = zog_megastructure_events.1.a
        custom_tooltip = zog_megastructure_events.1.a.tooltip
        trigger = {}
        ai_chance = {
            factor = 80
        }
        hidden_effect = {
            every_country = {
                limit = {
                    NOT = { is_same_value = from.owner }
                    OR = {
                        has_communications = from.owner
                        has_communications = root.owner
                    }
                    OR = {
                        is_country_type = default
                        is_country_type = fallen_empire
                        is_country_type = awakened_fallen_empire
                    }
                }
                add_opinion_modifier = {
                    modifier = opinion_uninhabitable_planet_cracked
                    who = from.owner
                }
            }
        }
    }
    option = {
        name = zog_megastructure_events.1.b
        custom_tooltip = zog_megastructure_events.1.b.tooltip
        trigger = {
            OR = {
                is_mercantile_regime = yes
                is_plutocratic_regime = yes
            }
        }
        ai_chance = {
            factor = 90
        }
        hidden_effect = {
            every_country = {
                limit = {
                    NOT = { is_same_value = from.owner }
                    OR = {
                        has_communications = from.owner
                        has_communications = root.owner
                    }
                    OR = {
                        is_country_type = default
                        is_country_type = fallen_empire
                        is_country_type = awakened_fallen_empire
                    }
                }
                if = {
                    limit = {
                        from.owner = {
                            has_country_resource = {
                                type = minerals
                                amount > 99
                            }
                        }
                    }
                    from.owner = {
                        add_minerals = -100
                    }
                    random_list = {
                        30 = {
                            add_opinion_modifier = {
                                modifier = opinion_uninhabitable_planet_cracked
                                who = from.owner
                            }
                        }
                        70 = {}
                    }
                    add_minerals = 50
                    else = {
                        add_opinion_modifier = {
                            modifier = opinion_uninhabitable_planet_cracked
                            who = from.owner
                        }
                    }
                }
            }
        }
    }
    option = {
        name = zog_megastructure_events.1.c
        custom_tooltip = zog_megastructure_events.1.c.tooltip
        trigger = {
            is_totalitarian_regime = yes
        }
        ai_chance = {
            factor = 90
        }
        hidden_effect = {
            every_country = {
                limit = {
                    NOT = { is_same_value = from.owner }
                    OR = {
                        has_communications = from.owner
                        has_communications = root.owner
                    }
                    OR = {
                        is_country_type = default
                        is_country_type = fallen_empire
                        is_country_type = awakened_fallen_empire
                    }
                }
                random_list = {
                    20 = {
                        add_opinion_modifier = {
                            modifier = opinion_uninhabitable_planet_cracked
                            who = from.owner
                        }
                    }
                    80 = {}
                }
            }
            random_list = {
                15 = {
                    random_owned_planet = {
                        limit = {
                            count_pops = {
                                count > 0
                                limit = {
                                    is_growing = no
                                    is_robot_pop = no
                                }
                            }
                        }
                        random_pop = {
                            limit = {
                                is_growing = no
                                is_robot_pop = no
                            }
                            kill_pop = yes
                        }
                    }
                }
                85 = {}
            }
        }
    }
    option = {
        name = zog_megastructure_events.1.d
        custom_tooltip = zog_megastructure_events.1.d.tooltip
        trigger = {
            from.owner = {
                OR = {
                    check_variable = { which = "uninhabitable_planets_cracked" value > 24 }
                    count_neighbor_country = {
                        count > 1
                        limit = {
                            has_technology = "tech_uninhabitable_planet_cracking"
                        }
                    }
                }
            }
        }
        ai_chance = {
            factor = 100
        }
        hidden_effect = {}
    }
}

###################################
### Gas Giant planet compacting
###################################

country_event = {
    id = zog_megastructure_events.2
    title = zog_megastructure_events.2.title
    desc = zog_megastructure_events.2.desc
    picture = GFX_evt_planet_compacting
    show_sound = event_ship_explosion
    is_triggered_only = yes
    location = from.planet

    trigger = {
        from = { is_megastructure_type = "zog_gas_giant_planet_compacting_0" }
    }

    #immediate = {}

    option = {
        name = zog_megastructure_events.2.a
        custom_tooltip = zog_megastructure_events.2.a.tooltip
        trigger = {}
        ai_chance = {
            factor = 30
        }
        hidden_effect = {
            every_country = {
                limit = {
                    NOT = { is_same_value = from.owner }
                    OR = {
                        has_communications = from.owner
                        has_communications = root.owner
                    }
                }
                add_opinion_modifier = {
                    modifier = opinion_compacted_gas_giant
                    who = from.owner
                }
            }
        }
    }
    option = {
        name = zog_megastructure_events.2.b
        custom_tooltip = zog_megastructure_events.2.b.tooltip
        trigger = {}
        ai_chance = {
            factor = 70
        }
    }
}

###################################
### Habitable planet cumulation
###################################

country_event = {
    id = zog_megastructure_events.3
    title = zog_megastructure_events.3.title
    desc = zog_megastructure_events.3.desc
    picture = GFX_evt_planet_cumulation
    show_sound = event_ship_explosion
    is_triggered_only = yes
    location = from.planet

    trigger = {
        from = { is_megastructure_type = "zog_habitable_planet_cumulation_0" }
    }

    #immediate = {}

    option = {
        name = zog_megastructure_events.3.a
        custom_tooltip = zog_megastructure_events.3.a.tooltip
        trigger = {}
        ai_chance = {
            factor = 30
        }
        hidden_effect = {
            every_country = {
                limit = {
                    NOT = { is_same_value = from.owner }
                    OR = {
                        has_communications = from.owner
                        has_communications = root.owner
                    }
                }
                add_opinion_modifier = {
                    modifier = opinion_cumulated_habitable_planet
                    who = from.owner
                }
            }
        }
    }
    option = {
        name = zog_megastructure_events.3.b
        custom_tooltip = zog_megastructure_events.3.b.tooltip
        trigger = {}
        ai_chance = {
            factor = 70
        }
    }
}

###############################
### Organic life engineering
###############################

country_event = {
    id = zog_megastructure_events.4
    title = zog_megastructure_events.4.title
    desc = zog_megastructure_events.4.desc
    picture = GFX_evt_planet_life_engineering
    show_sound = event_primitive_civilization
    is_triggered_only = yes
    location = from.planet

    trigger = {
        from = { is_megastructure_type = "zog_life_engineering_0" }
    }

    immediate = {
        from.owner = {
            save_event_target_as = zog_life_engineering_owner
        }
    }

    option = {
        name = zog_megastructure_events.4.a
        custom_tooltip = zog_megastructure_events.4.a.tooltip
        trigger = {
            from.owner = {
                has_country_flag = "HUM_species_researched"
                check_variable = {
                    which = "HUM_species_points"
                    value > 0
                }
            }
        }
        ai_chance = {
            factor = 50
            modifier = {
                factor = 100
                from.owner = {
                    is_species_class = HUM
                }
            }
        }
        hidden_effect = {
            from.planet = {
                create_species = {
                    name = random
                    class = HUM
                    portrait = random
                    homeworld = this
                    traits = {
                        trait = random_traits
                    }
                    sapient = yes

                    effect = {
                        rename_species = {
                            prompt_country = from.owner
                            name_list = "HUM1"
                        }
                    }
                }
                create_country = {
                    name = random
                    authority = random
                    civics = {
                        civic = civic_landed_nobility
                        civic = civic_flat_world_theory
                    }
                    species = last_created
                    ethos = random
                    flag = {
                        icon = {
                            category = "special"
                            file = "primitive.dds"
                        }
                        background = {
                            category = "backgrounds"
                            file = "new_dawn.dds"
                        }
                        colors = {
                            "dark_blue"
                            "black"
                            "null"
                            "null"
                        }
                    }
                    type = primitive
                }
                last_created_country = {
                    set_graphical_culture = preindustrial_01
                    set_country_flag = stone_age 
                    set_primitive_age = stone_age
                    change_government = {
                        authority = random
                        civics = {
                            civic = civic_secret_of_fire
                            civic = civic_the_wheel
                        }
                    }
                    set_country_flag = "engineered_species"
                }
                set_owner = last_created_country
                set_capital = yes
                create_colony = {
                    owner = last_created_country
                    species = last_created
                    ethos = owner
                }
                random_tile = {
                    limit = { has_building = building_colony_shelter }
                    remove_building = yes
                }
                while = {
                    count = 1
                    best_tile_for_pop = {
                        create_pop = {
                            species = last_created
                        }
                    }
                }
                create_army = {
                    name = "Primitive Humanoid Army"
                    owner = last_created
                    species = last_created
                    type = "primitive_army"
                }
                last_created_country = {
                    establish_contact = { who = from.owner }
                    establish_communications = from.owner
                }
            }
            from.owner = {
                if = {
                    limit = {
                        check_variable = {
                            which = "HUM_species_points"
                            value > 0
                        }
                    }
                    change_variable = {
                        which = "HUM_species_points"
                        value = -1
                    }
                }
            }
        }
    }
    option = {
        name = zog_megastructure_events.4.b
        custom_tooltip = zog_megastructure_events.4.b.tooltip
        trigger = {
            from.owner = {
                has_country_flag = "MAM_species_researched"
                check_variable = {
                    which = "MAM_species_points"
                    value > 0
                }
            }
        }
        ai_chance = {
            factor = 50
            modifier = {
                factor = 100
                from.owner = {
                    is_species_class = MAM
                }
            }
        }
        hidden_effect = {
            from.planet = {
                create_species = {
                    name = random
                    class = MAM
                    portrait = random
                    homeworld = this
                    traits = {
                        trait = random_traits
                    }
                    sapient = yes

                    effect = {
                        rename_species = {
                            prompt_country = from.owner
                            name_list = "MAM1"
                        }
                    }
                }
                create_country = {
                    name = random
                    authority = random
                    civics = {
                        civic = civic_landed_nobility
                        civic = civic_flat_world_theory
                    }
                    species = last_created
                    ethos = random
                    flag = {
                        icon = {
                            category = "special"
                            file = "primitive.dds"
                        }
                        background = {
                            category = "backgrounds"
                            file = "new_dawn.dds"
                        }
                        colors = {
                            "turquoise"
                            "green"
                            "null"
                            "null"
                        }
                    }
                    type = primitive
                }
                last_created_country = {
                    set_graphical_culture = preindustrial_01
                    set_country_flag = stone_age 
                    set_primitive_age = stone_age
                    change_government = {
                        authority = random
                        civics = {
                            civic = civic_secret_of_fire
                            civic = civic_the_wheel
                        }
                    }
                    set_country_flag = "engineered_species"
                }
                set_owner = last_created_country
                set_capital = yes
                create_colony = {
                    owner = last_created_country
                    species = last_created
                    ethos = owner
                }
                random_tile = {
                    limit = { has_building = building_colony_shelter }
                    remove_building = yes
                }
                while = {
                    count = 1
                    best_tile_for_pop = {
                        create_pop = {
                            species = last_created
                        }
                    }
                }
                create_army = {
                    name = "Primitive Mammalian Army"
                    owner = last_created
                    species = last_created
                    type = "primitive_army"
                }
                last_created_country = {
                    establish_contact = { who = from.owner }
                    establish_communications = from.owner
                }
            }
            from.owner = {
                if = {
                    limit = {
                        check_variable = {
                            which = "MAM_species_points"
                            value > 0
                        }
                    }
                    change_variable = {
                        which = "MAM_species_points"
                        value = -1
                    }
                }
            }
        }
    }
    option = {
        name = zog_megastructure_events.4.c
        custom_tooltip = zog_megastructure_events.4.c.tooltip
        trigger = {
            from.owner = {
                has_country_flag = "REP_species_researched"
                check_variable = {
                    which = "REP_species_points"
                    value > 0
                }
            }
        }
        ai_chance = {
            factor = 50
            modifier = {
                factor = 100
                from.owner = {
                    is_species_class = REP
                }
            }
        }
        hidden_effect = {
            from.planet = {
                create_species = {
                    name = random
                    class = REP
                    portrait = random
                    homeworld = this
                    traits = {
                        trait = random_traits
                    }
                    sapient = yes

                    effect = {
                        rename_species = {
                            prompt_country = from.owner
                            name_list = "REP1"
                        }
                    }
                }
                create_country = {
                    name = random
                    authority = random
                    civics = {
                        civic = civic_landed_nobility
                        civic = civic_flat_world_theory
                    }
                    species = last_created
                    ethos = random
                    flag = {
                        icon = {
                            category = "special"
                            file = "primitive.dds"
                        }
                        background = {
                            category = "backgrounds"
                            file = "new_dawn.dds"
                        }
                        colors = {
                            "red_orange"
                            "yellow"
                            "null"
                            "null"
                        }
                    }
                    type = primitive
                }
                last_created_country = {
                    set_graphical_culture = preindustrial_01
                    set_country_flag = stone_age 
                    set_primitive_age = stone_age
                    change_government = {
                        authority = random
                        civics = {
                            civic = civic_secret_of_fire
                            civic = civic_the_wheel
                        }
                    }
                    set_country_flag = "engineered_species"
                }
                set_owner = last_created_country
                set_capital = yes
                create_colony = {
                    owner = last_created_country
                    species = last_created
                    ethos = owner
                }
                random_tile = {
                    limit = { has_building = building_colony_shelter }
                    remove_building = yes
                }
                while = {
                    count = 1
                    best_tile_for_pop = {
                        create_pop = {
                            species = last_created
                        }
                    }
                }
                create_army = {
                    name = "Primitive Reptilian Army"
                    owner = last_created
                    species = last_created
                    type = "primitive_army"
                }
                last_created_country = {
                    establish_contact = { who = from.owner }
                    establish_communications = from.owner
                }
            }
            from.owner = {
                if = {
                    limit = {
                        check_variable = {
                            which = "REP_species_points"
                            value > 0
                        }
                    }
                    change_variable = {
                        which = "REP_species_points"
                        value = -1
                    }
                }
            }
        }
    }
    option = {
        name = zog_megastructure_events.4.d
        custom_tooltip = zog_megastructure_events.4.d.tooltip
        trigger = {
            from.owner = {
                has_country_flag = "AVI_species_researched"
                check_variable = {
                    which = "AVI_species_points"
                    value > 0
                }
            }
        }
        ai_chance = {
            factor = 50
            modifier = {
                factor = 100
                from.owner = {
                    is_species_class = AVI
                }
            }
        }
        hidden_effect = {
            from.planet = {
                create_species = {
                    name = random
                    class = AVI
                    portrait = random
                    homeworld = this
                    traits = {
                        trait = random_traits
                    }
                    sapient = yes

                    effect = {
                        rename_species = {
                            prompt_country = from.owner
                            name_list = "AVI1"
                        }
                    }
                }
                create_country = {
                    name = random
                    authority = random
                    civics = {
                        civic = civic_landed_nobility
                        civic = civic_flat_world_theory
                    }
                    species = last_created
                    ethos = random
                    flag = {
                        icon = {
                            category = "special"
                            file = "primitive.dds"
                        }
                        background = {
                            category = "backgrounds"
                            file = "new_dawn.dds"
                        }
                        colors = {
                            "purple"
                            "dark_teal"
                            "null"
                            "null"
                        }
                    }
                    type = primitive
                }
                last_created_country = {
                    set_graphical_culture = preindustrial_01
                    set_country_flag = stone_age 
                    set_primitive_age = stone_age
                    change_government = {
                        authority = random
                        civics = {
                            civic = civic_secret_of_fire
                            civic = civic_the_wheel
                        }
                    }
                    set_country_flag = "engineered_species"
                }
                set_owner = last_created_country
                set_capital = yes
                create_colony = {
                    owner = last_created_country
                    species = last_created
                    ethos = owner
                }
                random_tile = {
                    limit = { has_building = building_colony_shelter }
                    remove_building = yes
                }
                while = {
                    count = 1
                    best_tile_for_pop = {
                        create_pop = {
                            species = last_created
                        }
                    }
                }
                create_army = {
                    name = "Primitive Avian Army"
                    owner = last_created
                    species = last_created
                    type = "primitive_army"
                }
                last_created_country = {
                    establish_contact = { who = from.owner }
                    establish_communications = from.owner
                }
            }
            from.owner = {
                if = {
                    limit = {
                        check_variable = {
                            which = "AVI_species_points"
                            value > 0
                        }
                    }
                    change_variable = {
                        which = "AVI_species_points"
                        value = -1
                    }
                }
            }
        }
    }
    option = {
        name = zog_megastructure_events.4.e
        custom_tooltip = zog_megastructure_events.4.e.tooltip
        trigger = {
            from.owner = {
                has_country_flag = "ART_species_researched"
                check_variable = {
                    which = "ART_species_points"
                    value > 0
                }
            }
        }
        ai_chance = {
            factor = 50
            modifier = {
                factor = 100
                from.owner = {
                    is_species_class = ART
                }
            }
        }
        hidden_effect = {
            from.planet = {
                create_species = {
                    name = random
                    class = ART
                    portrait = random
                    homeworld = this
                    traits = {
                        trait = random_traits
                    }
                    sapient = yes

                    effect = {
                        rename_species = {
                            prompt_country = from.owner
                            name_list = "ART1"
                        }
                    }
                }
                create_country = {
                    name = random
                    authority = random
                    civics = {
                        civic = civic_landed_nobility
                        civic = civic_flat_world_theory
                    }
                    species = last_created
                    ethos = random
                    flag = {
                        icon = {
                            category = "special"
                            file = "primitive.dds"
                        }
                        background = {
                            category = "backgrounds"
                            file = "new_dawn.dds"
                        }
                        colors = {
                            "dark_brown"
                            "indigo"
                            "null"
                            "null"
                        }
                    }
                    type = primitive
                }
                last_created_country = {
                    set_graphical_culture = preindustrial_01
                    set_country_flag = stone_age 
                    set_primitive_age = stone_age
                    change_government = {
                        authority = random
                        civics = {
                            civic = civic_secret_of_fire
                            civic = civic_the_wheel
                        }
                    }
                    set_country_flag = "engineered_species"
                }
                set_owner = last_created_country
                set_capital = yes
                create_colony = {
                    owner = last_created_country
                    species = last_created
                    ethos = owner
                }
                random_tile = {
                    limit = { has_building = building_colony_shelter }
                    remove_building = yes
                }
                while = {
                    count = 1
                    best_tile_for_pop = {
                        create_pop = {
                            species = last_created
                        }
                    }
                }
                create_army = {
                    name = "Primitive Arthropoid Army"
                    owner = last_created
                    species = last_created
                    type = "primitive_army"
                }
                last_created_country = {
                    establish_contact = { who = from.owner }
                    establish_communications = from.owner
                }
            }
            from.owner = {
                if = {
                    limit = {
                        check_variable = {
                            which = "ART_species_points"
                            value > 0
                        }
                    }
                    change_variable = {
                        which = "ART_species_points"
                        value = -1
                    }
                }
            }
        }
    }
    option = {
        name = zog_megastructure_events.4.f
        custom_tooltip = zog_megastructure_events.4.f.tooltip
        trigger = {
            from.owner = {
                has_country_flag = "FUN_species_researched"
                check_variable = {
                    which = "FUN_species_points"
                    value > 0
                }
            }
        }
        ai_chance = {
            factor = 50
            modifier = {
                factor = 100
                from.owner = {
                    is_species_class = FUN
                }
            }
        }
        hidden_effect = {
            from.planet = {
                create_species = {
                    name = random
                    class = FUN
                    portrait = random
                    homeworld = this
                    traits = {
                        trait = random_traits
                    }
                    sapient = yes

                    effect = {
                        rename_species = {
                            prompt_country = from.owner
                            name_list = "FUN1"
                        }
                    }
                }
                create_country = {
                    name = random
                    authority = random
                    civics = {
                        civic = civic_landed_nobility
                        civic = civic_flat_world_theory
                    }
                    species = last_created
                    ethos = random
                    flag = {
                        icon = {
                            category = "special"
                            file = "primitive.dds"
                        }
                        background = {
                            category = "backgrounds"
                            file = "new_dawn.dds"
                        }
                        colors = {
                            "light_green"
                            "pink"
                            "null"
                            "null"
                        }
                    }
                    type = primitive
                }
                last_created_country = {
                    set_graphical_culture = preindustrial_01
                    set_country_flag = stone_age 
                    set_primitive_age = stone_age
                    change_government = {
                        authority = random
                        civics = {
                            civic = civic_secret_of_fire
                            civic = civic_the_wheel
                        }
                    }
                    set_country_flag = "engineered_species"
                }
                set_owner = last_created_country
                set_capital = yes
                create_colony = {
                    owner = last_created_country
                    species = last_created
                    ethos = owner
                }
                random_tile = {
                    limit = { has_building = building_colony_shelter }
                    remove_building = yes
                }
                while = {
                    count = 1
                    best_tile_for_pop = {
                        create_pop = {
                            species = last_created
                        }
                    }
                }
                create_army = {
                    name = "Primitive Fungoid Army"
                    owner = last_created
                    species = last_created
                    type = "primitive_army"
                }
                last_created_country = {
                    establish_contact = { who = from.owner }
                    establish_communications = from.owner
                }
            }
            from.owner = {
                if = {
                    limit = {
                        check_variable = {
                            which = "FUN_species_points"
                            value > 0
                        }
                    }
                    change_variable = {
                        which = "FUN_species_points"
                        value = -1
                    }
                }
            }
        }
    }
    option = {
        name = zog_megastructure_events.4.g
        custom_tooltip = zog_megastructure_events.4.g.tooltip
        trigger = {
            from.owner = {
                has_country_flag = "MOL_species_researched"
                check_variable = {
                    which = "MOL_species_points"
                    value > 0
                }
            }
        }
        ai_chance = {
            factor = 50
            modifier = {
                factor = 100
                from.owner = {
                    is_species_class = MOL
                }
            }
        }
        hidden_effect = {
            from.planet = {
                create_species = {
                    name = random
                    class = MOL
                    portrait = random
                    homeworld = this
                    traits = {
                        trait = random_traits
                    }
                    sapient = yes

                    effect = {
                        rename_species = {
                            prompt_country = from.owner
                            name_list = "MOL1"
                        }
                    }
                }
                create_country = {
                    name = random
                    authority = random
                    civics = {
                        civic = civic_landed_nobility
                        civic = civic_flat_world_theory
                    }
                    species = last_created
                    ethos = random
                    flag = {
                        icon = {
                            category = "special"
                            file = "primitive.dds"
                        }
                        background = {
                            category = "backgrounds"
                            file = "new_dawn.dds"
                        }
                        colors = {
                            "teal"
                            "grey"
                            "null"
                            "null"
                        }
                    }
                    type = primitive
                }
                last_created_country = {
                    set_graphical_culture = preindustrial_01
                    set_country_flag = stone_age 
                    set_primitive_age = stone_age
                    change_government = {
                        authority = random
                        civics = {
                            civic = civic_secret_of_fire
                            civic = civic_the_wheel
                        }
                    }
                    set_country_flag = "engineered_species"
                }
                set_owner = last_created_country
                set_capital = yes
                create_colony = {
                    owner = last_created_country
                    species = last_created
                    ethos = owner
                }
                random_tile = {
                    limit = { has_building = building_colony_shelter }
                    remove_building = yes
                }
                while = {
                    count = 1
                    best_tile_for_pop = {
                        create_pop = {
                            species = last_created
                        }
                    }
                }
                create_army = {
                    name = "Primitive Molluscoid Army"
                    owner = last_created
                    species = last_created
                    type = "primitive_army"
                }
                last_created_country = {
                    establish_contact = { who = from.owner }
                    establish_communications = from.owner
                }
            }
            from.owner = {
                if = {
                    limit = {
                        check_variable = {
                            which = "MOL_species_points"
                            value > 0
                        }
                    }
                    change_variable = {
                        which = "MOL_species_points"
                        value = -1
                    }
                }
            }
        }
    }
    option = {
        name = zog_megastructure_events.4.h
        custom_tooltip = zog_megastructure_events.4.h.tooltip
        trigger = {
            from.owner = {
                has_country_flag = "PLANT_species_researched"
                check_variable = {
                    which = "PLANT_species_points"
                    value > 0
                }
            }
        }
        ai_chance = {
            factor = 50
            modifier = {
                factor = 100
                from.owner = {
                    is_species_class = PLANT
                }
            }
        }
        hidden_effect = {
            from.planet = {
                create_species = {
                    name = random
                    class = PLANT
                    portrait = random
                    homeworld = this
                    traits = {
                        trait = random_traits
                    }
                    sapient = yes

                    effect = {
                        rename_species = {
                            prompt_country = from.owner
                            name_list = "PLANT"
                        }
                    }
                }
                create_country = {
                    name = random
                    authority = random
                    civics = {
                        civic = civic_landed_nobility
                        civic = civic_flat_world_theory
                    }
                    species = last_created
                    ethos = random
                    flag = {
                        icon = {
                            category = "special"
                            file = "primitive.dds"
                        }
                        background = {
                            category = "backgrounds"
                            file = "new_dawn.dds"
                        }
                        colors = {
                            "dark_green"
                            "yellow"
                            "null"
                            "null"
                        }
                    }
                    type = primitive
                }
                last_created_country = {
                    set_graphical_culture = preindustrial_01
                    set_country_flag = stone_age 
                    set_primitive_age = stone_age
                    change_government = {
                        authority = random
                        civics = {
                            civic = civic_secret_of_fire
                            civic = civic_the_wheel
                        }
                    }
                    set_country_flag = "engineered_species"
                }
                set_owner = last_created_country
                set_capital = yes
                create_colony = {
                    owner = last_created_country
                    species = last_created
                    ethos = owner
                }
                random_tile = {
                    limit = { has_building = building_colony_shelter }
                    remove_building = yes
                }
                while = {
                    count = 1
                    best_tile_for_pop = {
                        create_pop = {
                            species = last_created
                        }
                    }
                }
                create_army = {
                    name = "Primitive Plantoid Army"
                    owner = last_created
                    species = last_created
                    type = "primitive_army"
                }
                last_created_country = {
                    establish_contact = { who = from.owner }
                    establish_communications = from.owner
                }
            }
            from.owner = {
                if = {
                    limit = {
                        check_variable = {
                            which = "PLANT_species_points"
                            value > 0
                        }
                    }
                    change_variable = {
                        which = "PLANT_species_points"
                        value = -1
                    }
                }
            }
        }
    }
    option = {
        name = zog_megastructure_events.4.z
        custom_tooltip = zog_megastructure_events.4.z.tooltip
        trigger = {}
        ai_chance = {
            factor = 40
        }
        hidden_effect = {}
    }

    after = {
        hidden_effect = {}
    }
}

#################################
### Synthetic life engineering
#################################

country_event = {
    id = zog_megastructure_events.5
    title = zog_megastructure_events.5.title
    desc = zog_megastructure_events.5.desc
    picture = GFX_evt_planet_synth_engineering
    show_sound = event_primitive_civilization
    is_triggered_only = yes
    location = from.planet

    trigger = {
        host_has_dlc = "Synthetic Dawn Story Pack"
        from = { is_megastructure_type = "zog_synth_engineering_0" }
    }

    immediate = {
        from.owner = {
            save_event_target_as = zog_synth_engineering_owner
        }
    }

    option = {
        name = zog_megastructure_events.5.a
        custom_tooltip = zog_megastructure_events.5.a.tooltip
        trigger = {
            from.owner = {
                has_country_flag = "MACHINE_species_researched"
                check_variable = {
                    which = "MACHINE_species_points"
                    value > 0
                }
            }
        }
        ai_chance = {
            factor = 50
            modifier = {
                factor = 100
                from.owner = {
                    is_species_class = MACHINE
                }
            }
        }
        hidden_effect = {
            from.planet = {
                create_species = {
                    name = random
                    class = MACHINE
                    portrait = "sd_hum_robot"
                    homeworld = this
                    traits = {
                        trait = "trait_machine_unit"
                        trait = random_traits
                    }
                    namelist = "MACHINE1"

                    pops_can_be_colonizers = yes
                    pops_can_migrate = yes
                    pops_can_reproduce = yes
                    pops_can_join_factions = yes
                    pops_can_be_slaves = no
                    can_generate_leaders = yes
                    consumer_goods = yes
                    pop_ethics = yes
                    extra_trait_points = 3
                    allow_negative_traits = no

                    effect = {
                        set_species_flag = "primitive_robots_flag"
                    }
                }
                create_country = {
                    name = random
                    type = default
                    ignore_initial_colony_error = yes
                    authority = auth_machine_intelligence
                    civics = {
                        civic = civic_machine_remnants
                    }
                    species = last_created
                    ethos = {
                        ethic = random
                    }
                    flag = random
                }
                last_created_country = {
                    set_country_flag = "engineered_species"
                    add_minerals = 5000
                    add_energy = 5000
                    add_food = 500
                    add_influence = 300
                }
                set_owner = last_created_country
                set_controller = last_created_country
                set_capital = yes
                create_colony = {
                    owner = last_created_country
                    species = last_created
                    ethos = owner
                }
                while = {
                    count = 3
                    best_tile_for_pop = {
                        create_pop = {
                            species = last_created
                        }
                    }
                }
                while = {
                    count = 3
                    create_army = {
                        name = random
                        owner = last_created
                        species = last_created
                        type = "android_army"
                    }
                }
                set_planet_flag = "primitive_robot_planet"
                add_modifier = { modifier = "primitive_robots" years = -1 }
                last_created_country = {
                    establish_contact = { who = from.owner }
                    establish_communications = from.owner
                }
            }
            from.owner = {
                if = {
                    limit = {
                        check_variable = {
                            which = "MACHINE_species_points"
                            value > 0
                        }
                    }
                    change_variable = {
                        which = "MACHINE_species_points"
                        value = -1
                    }
                }
            }
        }
    }
    option = {
        name = zog_megastructure_events.5.b
        custom_tooltip = zog_megastructure_events.5.b.tooltip
        trigger = {
            from.owner = {
                has_country_flag = "ROBOT_species_researched"
                check_variable = {
                    which = "ROBOT_species_points"
                    value > 0
                }
            }
        }
        ai_chance = {
            factor = 50
            modifier = {
                factor = 100
                from.owner = {
                    is_species_class = ROBOT
                }
            }
        }
        hidden_effect = {
            from.planet = {
                create_species = {
                    name = random
                    class = ROBOT
                    portrait = "sd_hum_robot"
                    homeworld = this
                    traits = {
                        trait = "trait_mechanical"
                        trait = random_traits
                    }
                    namelist = "AI"

                    pops_can_be_colonizers = yes
                    pops_can_migrate = yes
                    pops_can_reproduce = yes
                    pops_can_join_factions = yes
                    pops_can_be_slaves = no
                    can_generate_leaders = yes
                    consumer_goods = yes
                    pop_ethics = yes
                    extra_trait_points = 3
                    allow_negative_traits = no

                    effect = {
                        set_species_flag = "primitive_robots_flag"
                    }
                }
                create_country = {
                    name = random
                    type = default
                    authority = auth_machine_intelligence
                    civics = {
                        civic = civic_machine_terminator
                    }
                    species = last_created
                    ethos = {
                        ethic = random
                    }
                    flag = random
                }
                last_created_country = {
                    set_country_flag = "engineered_species"
                    add_minerals = 5000
                    add_energy = 5000
                    add_food = 500
                    add_influence = 300
                }
                set_owner = last_created_country
                set_controller = last_created_country
                set_capital = yes
                create_colony = {
                    owner = last_created_country
                    species = last_created
                    ethos = owner
                }
                while = {
                    count = 3
                    best_tile_for_pop = {
                        create_pop = {
                            species = last_created
                        }
                    }
                }
                while = {
                    count = 3
                    create_army = {
                        name = random
                        owner = last_created
                        species = last_created
                        type = "android_army"
                    }
                }
                set_planet_flag = "primitive_robot_planet"
                add_modifier = { modifier = primitive_robots years = -1 }
                last_created_country = {
                    establish_contact = { who = from.owner }
                    establish_communications = from.owner
                }
            }
            from.owner = {
                if = {
                    limit = {
                        check_variable = {
                            which = "ROBOT_species_points"
                            value > 0
                        }
                    }
                    change_variable = {
                        which = "ROBOT_species_points"
                        value = -1
                    }
                }
            }
        }
    }
    option = {
        name = zog_megastructure_events.5.z
        custom_tooltip = zog_megastructure_events.5.z.tooltip
        trigger = {}
        ai_chance = {
            factor = 40
        }
        hidden_effect = {}
    }

    after = {
        hidden_effect = {}
    }
}