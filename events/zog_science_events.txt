namespace = zog_science_events

ship_event = {
    id = zog_science_events.0
    title = zog_science_events.0.title
    desc = zog_science_events.0.desc
    picture = GFX_evt_masseffect_discovered
    show_sound = event_laboratory_sound
    is_triggered_only = yes
    hide_window = no
    location = from

    trigger = {
        owner = {
            NOT = {
                has_event_chain = "masseffect_anomaly_chain"
            }
        }
    }

    immediate = {
        owner = {
            add_research_option = "tech_theory_of_mass_effect"
            add_tech_progress = {
                tech = "tech_theory_of_mass_effect"
                progress = 0.10
            }
        }
    }

    option = {
        name = zog_science_events.0.a
        custom_tooltip = zog_science_events.0.a.tooltip
        ai_chance = {
            factor = 100
        }
        hidden_effect = {
            from = {
                save_event_target_as = "masseffect_anomaly_planet"
            }
            owner = {
                begin_event_chain = {
                    event_chain = "masseffect_anomaly_chain"
                    target = this
                }
                random_list = {
                    10 = { country_event = { id = zog_science_events.13 days = 30 random = 15 } }
                    10 = { country_event = { id = zog_science_events.13 days = 90 random = 30 } }
                    10 = { country_event = { id = zog_science_events.13 days = 150 random = 60 } }
                    10 = { country_event = { id = zog_science_events.13 days = 210 random = 90 } }
                    10 = { country_event = { id = zog_science_events.13 days = 270 random = 120 } }
                    10 = { country_event = { id = zog_science_events.13 days = 330 random = 150 } }
                    10 = { country_event = { id = zog_science_events.13 days = 390 random = 180 } }
                    10 = { country_event = { id = zog_science_events.13 days = 450 random = 210 } }
                    10 = { country_event = { id = zog_science_events.13 days = 510 random = 240 } }
                    10 = { country_event = { id = zog_science_events.13 days = 570 random = 270 } }
                }
            }
        }
    }
}

ship_event = {
    id = zog_science_events.1
    title = zog_science_events.1.title
    desc = zog_science_events.1.desc
    picture = GFX_evt_masseffect_discovered
    show_sound = event_laboratory_sound
    is_triggered_only = yes
    hide_window = no
    location = from

    trigger = {
        owner = {
            has_event_chain = "masseffect_anomaly_chain"
        }
    }

    immediate = {
        log = "----- IN ZOG_SCIENCE_EVENTS.1"
        print_project_scope_b = yes
    }

    option = {
        name = zog_science_events.1.a
        custom_tooltip = zog_science_events.1.a.tooltip
        owner = {
            add_engineering_research = 150
            add_energy = 500
        }
        hidden_effect = {
            from = {
                save_event_target_as = "masseffect_anomaly_planet"
                enable_special_project = {
                    name = "MASSEFFECT_ANOMALY_PROJECT_A"
                    location = this
                    owner = root.owner
                }
            }
            owner = {
                remove_point_of_interest = "masseffect_anomaly_location"
            }
        }
    }
}

ship_event = {
    id = zog_science_events.2
    title = zog_science_events.2.title
    desc = zog_science_events.2.desc
    picture = GFX_evt_masseffect_discovered
    show_sound = event_laboratory_sound
    is_triggered_only = yes
    hide_window = no
    location = from

    trigger = {
        owner = {
            has_event_chain = "masseffect_anomaly_chain"
        }
    }

    immediate = {
        log = "----- IN ZOG_SCIENCE_EVENTS.2"
        print_project_scope_b = yes
    }

    option = {
        name = zog_science_events.2.a
        custom_tooltip = zog_science_events.2.a.tooltip
        owner = {
            add_engineering_research = 200
            add_energy = 750
        }
        hidden_effect = {
            from = {
                save_event_target_as = "masseffect_anomaly_planet"
                enable_special_project = {
                    name = "MASSEFFECT_ANOMALY_PROJECT_B"
                    location = this
                    owner = root.owner
                }
            }
            owner = {
                remove_point_of_interest = "masseffect_anomaly_location"
            }
        }
    }
}

ship_event = {
    id = zog_science_events.3
    title = zog_science_events.3.title
    desc = zog_science_events.3.desc
    picture = GFX_evt_masseffect_discovered
    show_sound = event_laboratory_sound
    is_triggered_only = yes
    hide_window = no
    location = from

    trigger = {
        owner = {
            has_event_chain = "masseffect_anomaly_chain"
        }
    }

    immediate = {
        log = "----- IN ZOG_SCIENCE_EVENTS.3"
        print_project_scope_b = yes
    }

    option = {
        name = zog_science_events.3.a
        custom_tooltip = zog_science_events.3.a.tooltip
        owner = {
            add_engineering_research = 250
            add_energy = 1000
        }
        hidden_effect = {
            from = {
                save_event_target_as = "masseffect_anomaly_planet"
                enable_special_project = {
                    name = "MASSEFFECT_ANOMALY_PROJECT_C"
                    location = this
                    owner = root.owner
                }
            }
            owner = {
                remove_point_of_interest = "masseffect_anomaly_location"
            }
        }
    }
}

ship_event = {
    id = zog_science_events.4
    title = zog_science_events.4.title
    desc = zog_science_events.4.desc
    picture = GFX_evt_masseffect_discovered
    show_sound = event_laboratory_sound
    is_triggered_only = yes
    hide_window = no
    location = from

    trigger = {
        owner = {
            has_event_chain = "masseffect_anomaly_chain"
        }
    }

    immediate = {
        log = "----- IN ZOG_SCIENCE_EVENTS.4"
        print_project_scope_b = yes
    }

    option = {
        name = zog_science_events.4.a
        custom_tooltip = zog_science_events.4.a.tooltip
        owner = {
            add_engineering_research = 300
            add_energy = 1250
        }
        hidden_effect = {
            from = {
                save_event_target_as = "masseffect_anomaly_planet"
                enable_special_project = {
                    name = "MASSEFFECT_ANOMALY_PROJECT_D"
                    location = this
                    owner = root.owner
                }
            }
            owner = {
                remove_point_of_interest = "masseffect_anomaly_location"
            }
        }
    }
}

ship_event = {
    id = zog_science_events.5
    title = zog_science_events.5.title
    desc = zog_science_events.5.desc
    picture = GFX_evt_masseffect_discovered
    show_sound = event_laboratory_sound
    is_triggered_only = yes
    hide_window = no
    location = from

    trigger = {
        owner = {
            has_event_chain = "masseffect_anomaly_chain"
        }
    }

    immediate = {
        log = "----- IN ZOG_SCIENCE_EVENTS.5"
        print_project_scope_b = yes
    }

    option = {
        name = zog_science_events.5.a
        custom_tooltip = zog_science_events.5.a.tooltip
        owner = {
            add_engineering_research = 350
            add_energy = 1500
        }
        hidden_effect = {
            from = {
                save_event_target_as = "masseffect_anomaly_planet"
                enable_special_project = {
                    name = "MASSEFFECT_ANOMALY_PROJECT_E"
                    location = this
                    owner = root.owner
                }
            }
            owner = {
                remove_point_of_interest = "masseffect_anomaly_location"
            }
        }
    }
}

ship_event = {
    id = zog_science_events.6
    title = zog_science_events.6.title
    desc = zog_science_events.6.desc
    picture = GFX_evt_masseffect_discovered
    show_sound = event_laboratory_sound
    is_triggered_only = yes
    hide_window = no
    location = from

    trigger = {
        owner = {
            has_event_chain = "masseffect_anomaly_chain"
        }
    }

    immediate = {
        log = "----- IN ZOG_SCIENCE_EVENTS.6"
        print_project_scope_b = yes
    }

    option = {
        name = zog_science_events.6.a
        custom_tooltip = zog_science_events.6.a.tooltip
        owner = {
            add_engineering_research = 400
            add_energy = 1750
        }
        hidden_effect = {
            from = {
                save_event_target_as = "masseffect_anomaly_planet"
                enable_special_project = {
                    name = "MASSEFFECT_ANOMALY_PROJECT_F"
                    location = this
                    owner = root.owner
                }
            }
            owner = {
                remove_point_of_interest = "masseffect_anomaly_location"
            }
        }
    }
}

ship_event = {
    id = zog_science_events.7
    title = zog_science_events.7.title
    desc = zog_science_events.7.desc
    picture = GFX_evt_masseffect_discovered
    show_sound = event_laboratory_sound
    is_triggered_only = yes
    hide_window = no
    location = from

    trigger = {
        owner = {
            has_event_chain = "masseffect_anomaly_chain"
        }
    }

    immediate = {
        log = "----- IN ZOG_SCIENCE_EVENTS.7"
        print_project_scope_b = yes
    }

    option = {
        name = zog_science_events.7.a
        custom_tooltip = zog_science_events.7.a.tooltip
        owner = {
            add_engineering_research = 450
            add_energy = 2000
        }
        hidden_effect = {
            from = {
                save_event_target_as = "masseffect_anomaly_planet"
                enable_special_project = {
                    name = "MASSEFFECT_ANOMALY_PROJECT_G"
                    location = this
                    owner = root.owner
                }
            }
            owner = {
                remove_point_of_interest = "masseffect_anomaly_location"
            }
        }
    }
}

ship_event = {
    id = zog_science_events.8
    title = zog_science_events.8.title
    desc = zog_science_events.8.desc
    picture = GFX_evt_masseffect_discovered
    show_sound = event_laboratory_sound
    is_triggered_only = yes
    hide_window = no
    location = from

    trigger = {
        owner = {
            has_event_chain = "masseffect_anomaly_chain"
        }
    }

    immediate = {
        log = "----- IN ZOG_SCIENCE_EVENTS.8"
        print_project_scope_b = yes
    }

    option = {
        name = zog_science_events.8.a
        custom_tooltip = zog_science_events.8.a.tooltip
        owner = {
            add_engineering_research = 500
            add_energy = 2250
        }
        hidden_effect = {
            from = {
                save_event_target_as = "masseffect_anomaly_planet"
                enable_special_project = {
                    name = "MASSEFFECT_ANOMALY_PROJECT_H"
                    location = this
                    owner = root.owner
                }
            }
            owner = {
                remove_point_of_interest = "masseffect_anomaly_location"
            }
        }
    }
}

country_event = {
    id = zog_science_events.11
    is_triggered_only = yes
    hide_window = yes

    trigger = {
        has_event_chain = "masseffect_anomaly_chain"
        NOT = {
            has_completed_event_chain_counter = {
                event_chain = "masseffect_anomaly_chain"
                counter = "anomalies_discovered"
            }
        }
    }

    immediate = {
        log = "----- IN zog_science_events.11"
        print_project_scope_b = yes

        random_list = {
            4 = { country_event = { id = zog_science_events.13 days = 936 random = 780 } }
            4 = { country_event = { id = zog_science_events.13 days = 972 random = 810 } }
            4 = { country_event = { id = zog_science_events.13 days = 1008 random = 840 } }
            4 = { country_event = { id = zog_science_events.13 days = 1044 random = 870 } }
            4 = { country_event = { id = zog_science_events.13 days = 1080 random = 900 } }
            4 = { country_event = { id = zog_science_events.13 days = 1116 random = 930 } }
            4 = { country_event = { id = zog_science_events.13 days = 1152 random = 960 } }
            4 = { country_event = { id = zog_science_events.13 days = 1188 random = 990 } }
            4 = { country_event = { id = zog_science_events.13 days = 1224 random = 1020 } }
            4 = { country_event = { id = zog_science_events.13 days = 1260 random = 1050 } }
            4 = { country_event = { id = zog_science_events.13 days = 1296 random = 1080 } }
            4 = { country_event = { id = zog_science_events.13 days = 1332 random = 1110 } }
            4 = { country_event = { id = zog_science_events.13 days = 1368 random = 1140 } }
            4 = { country_event = { id = zog_science_events.13 days = 1404 random = 1170 } }
            4 = { country_event = { id = zog_science_events.13 days = 1440 random = 1200 } }
            4 = { country_event = { id = zog_science_events.13 days = 1476 random = 1230 } }
            4 = { country_event = { id = zog_science_events.13 days = 1512 random = 1260 } }
            4 = { country_event = { id = zog_science_events.13 days = 1548 random = 1290 } }
            4 = { country_event = { id = zog_science_events.13 days = 1584 random = 1320 } }
            4 = { country_event = { id = zog_science_events.13 days = 1620 random = 1350 } }
            4 = { country_event = { id = zog_science_events.13 days = 1656 random = 1380 } }
            4 = { country_event = { id = zog_science_events.13 days = 1692 random = 1410 } }
            4 = { country_event = { id = zog_science_events.13 days = 1728 random = 1440 } }
            4 = { country_event = { id = zog_science_events.13 days = 1764 random = 1470 } }
            4 = { country_event = { id = zog_science_events.13 days = 1800 random = 1500 } }
        }
    }
}

country_event = {
    id = zog_science_events.12
    is_triggered_only = yes
    hide_window = yes

    trigger = {
        has_event_chain = "masseffect_anomaly_chain"
        NOT = {
            has_completed_event_chain_counter = {
                event_chain = "masseffect_anomaly_chain"
                counter = "anomalies_discovered"
            }
        }
    }

    immediate = {
        log = "----- IN zog_science_events.12"
        print_project_scope_b = yes

        if = {
            limit = {
                check_variable = {
                    which = "anomaly_masseffect_points"
                    value > 0
                }
            }
            change_variable = {
                which = "anomaly_masseffect_points"
                value = 1
            }
            else = {
                set_variable = {
                    which = "anomaly_masseffect_points"
                    value = 1
                }
            }
        }
        add_event_chain_counter = {
            event_chain = "masseffect_anomaly_chain"
            counter = "anomalies_discovered" 
            amount = 1
        }
        if = {
            limit = {
                NOT = {
                    has_completed_event_chain_counter = {
                        event_chain = "masseffect_anomaly_chain"
                        counter = "anomalies_discovered"
                    }
                }
            }
            random_list = {
                2 = { country_event = { id = zog_science_events.13 days = 36 random = 30 } }
                2 = { country_event = { id = zog_science_events.13 days = 72 random = 60 } }
                2 = { country_event = { id = zog_science_events.13 days = 108 random = 90 } }
                2 = { country_event = { id = zog_science_events.13 days = 144 random = 120 } }
                2 = { country_event = { id = zog_science_events.13 days = 180 random = 150 } }
                2 = { country_event = { id = zog_science_events.13 days = 216 random = 180 } }
                2 = { country_event = { id = zog_science_events.13 days = 252 random = 210 } }
                2 = { country_event = { id = zog_science_events.13 days = 288 random = 240 } }
                2 = { country_event = { id = zog_science_events.13 days = 324 random = 270 } }
                2 = { country_event = { id = zog_science_events.13 days = 360 random = 300 } }
                2 = { country_event = { id = zog_science_events.13 days = 396 random = 330 } }
                2 = { country_event = { id = zog_science_events.13 days = 432 random = 360 } }
                2 = { country_event = { id = zog_science_events.13 days = 468 random = 390 } }
                2 = { country_event = { id = zog_science_events.13 days = 504 random = 420 } }
                2 = { country_event = { id = zog_science_events.13 days = 540 random = 450 } }
                2 = { country_event = { id = zog_science_events.13 days = 576 random = 480 } }
                2 = { country_event = { id = zog_science_events.13 days = 612 random = 510 } }
                2 = { country_event = { id = zog_science_events.13 days = 648 random = 540 } }
                2 = { country_event = { id = zog_science_events.13 days = 684 random = 570 } }
                2 = { country_event = { id = zog_science_events.13 days = 720 random = 600 } }
                2 = { country_event = { id = zog_science_events.13 days = 756 random = 630 } }
                2 = { country_event = { id = zog_science_events.13 days = 792 random = 660 } }
                2 = { country_event = { id = zog_science_events.13 days = 828 random = 690 } }
                2 = { country_event = { id = zog_science_events.13 days = 864 random = 720 } }
                2 = { country_event = { id = zog_science_events.13 days = 900 random = 750 } }
                2 = { country_event = { id = zog_science_events.13 days = 936 random = 780 } }
                2 = { country_event = { id = zog_science_events.13 days = 972 random = 810 } }
                2 = { country_event = { id = zog_science_events.13 days = 1008 random = 840 } }
                2 = { country_event = { id = zog_science_events.13 days = 1044 random = 870 } }
                2 = { country_event = { id = zog_science_events.13 days = 1080 random = 900 } }
                2 = { country_event = { id = zog_science_events.13 days = 1116 random = 930 } }
                2 = { country_event = { id = zog_science_events.13 days = 1152 random = 960 } }
                2 = { country_event = { id = zog_science_events.13 days = 1188 random = 990 } }
                2 = { country_event = { id = zog_science_events.13 days = 1224 random = 1020 } }
                2 = { country_event = { id = zog_science_events.13 days = 1260 random = 1050 } }
                2 = { country_event = { id = zog_science_events.13 days = 1296 random = 1080 } }
                2 = { country_event = { id = zog_science_events.13 days = 1332 random = 1110 } }
                2 = { country_event = { id = zog_science_events.13 days = 1368 random = 1140 } }
                2 = { country_event = { id = zog_science_events.13 days = 1404 random = 1170 } }
                2 = { country_event = { id = zog_science_events.13 days = 1440 random = 1200 } }
                2 = { country_event = { id = zog_science_events.13 days = 1476 random = 1230 } }
                2 = { country_event = { id = zog_science_events.13 days = 1512 random = 1260 } }
                2 = { country_event = { id = zog_science_events.13 days = 1548 random = 1290 } }
                2 = { country_event = { id = zog_science_events.13 days = 1584 random = 1320 } }
                2 = { country_event = { id = zog_science_events.13 days = 1620 random = 1350 } }
                2 = { country_event = { id = zog_science_events.13 days = 1656 random = 1380 } }
                2 = { country_event = { id = zog_science_events.13 days = 1692 random = 1410 } }
                2 = { country_event = { id = zog_science_events.13 days = 1728 random = 1440 } }
                2 = { country_event = { id = zog_science_events.13 days = 1764 random = 1470 } }
                2 = { country_event = { id = zog_science_events.13 days = 1800 random = 1500 } }
            }
            log = "----- IS zog_science_events.13 SHOULD TRIGGER"
            else = {
                country_event = { id = zog_science_events.14 days = 5 }
                log = "----- IS zog_science_events.14 SHOULD TRIGGER"
            }
        }
    }
}

country_event = {
    id = zog_science_events.13
    title = zog_science_events.13.title
    desc = zog_science_events.13.desc
    picture = GFX_evt_masseffect_discovered
    show_sound = event_scanner
    is_triggered_only = yes
    hide_window = no

    trigger = {
        exists = event_target:masseffect_anomaly_planet
        has_event_chain = "masseffect_anomaly_chain"
        NOT = {
            has_completed_event_chain_counter = {
                event_chain = "masseffect_anomaly_chain"
                counter = "anomalies_discovered"
            }
        }
    }

    immediate = {
        log = "----- IN zog_science_events.13"
        print_project_scope_b = yes

        if = {
            limit = {
                any_system = {
                    distance = {
                        source = event_target:masseffect_anomaly_planet
                        use_bypasses = no
                        min_jumps = 1
                        max_jumps = 6
                    }
                    NOR = {
                        exists = space_owner
                        has_star_flag = hostile_system
                        any_ship_in_system = { always = yes }
                    }
                    any_planet = {
                        OR = {
                            is_habitable_planet = yes
                            is_uninhabitable_planet = yes
                        }
                        has_anomaly = no
                        has_owner = no
                        is_colony = no
                        is_capital = no
                        is_under_colonization = no
                    }
                }
            }
            log = "----- SCIENCE EVENT 8: external system found"
            print_country_scope_a = yes
            random_system = {
                limit = {
                    distance = {
                        source = event_target:masseffect_anomaly_planet
                        use_bypasses = no
                        min_jumps = 1
                        max_jumps = 6
                    }
                    NOR = {
                        exists = space_owner
                        has_star_flag = hostile_system
                        any_ship_in_system = { always = yes }
                    }
                    any_planet = {
                        OR = {
                            is_habitable_planet = yes
                            is_uninhabitable_planet = yes
                        }
                        has_anomaly = no
                        has_owner = no
                        is_colony = no
                        is_capital = no
                        is_under_colonization = no
                    }
                }
                log = "----- SCIENCE EVENT 8: in external system"
                random_system_planet = {
                    limit = {
                        OR = {
                            is_habitable_planet = yes
                            is_uninhabitable_planet = yes
                        }
                        has_anomaly = no
                        has_owner = no
                        is_colony = no
                        is_capital = no
                        is_under_colonization = no
                    }

                    if = {
                        limit = {
                            root = {
                                check_variable = {
                                    which = "anomaly_masseffect_points"
                                    value < 1
                                }
                            }
                        }
                        add_anomaly = MASSEFFECT_ANOMALY_CAT1
                        else = {
                            if = {
                                limit = {
                                    root = {
                                        check_variable = {
                                            which = "anomaly_masseffect_points"
                                            value = 1
                                        }
                                    }
                                }
                                add_anomaly = MASSEFFECT_ANOMALY_CAT2
                                else = {
                                    if = {
                                        limit = {
                                            root = {
                                                check_variable = {
                                                    which = "anomaly_masseffect_points"
                                                    value = 2
                                                }
                                            }
                                        }
                                        add_anomaly = MASSEFFECT_ANOMALY_CAT3
                                        else = {
                                            if = {
                                                limit = {
                                                    root = {
                                                        check_variable = {
                                                            which = "anomaly_masseffect_points"
                                                            value = 3
                                                        }
                                                    }
                                                }
                                                add_anomaly = MASSEFFECT_ANOMALY_CAT4
                                                else = {
                                                    if = {
                                                        limit = {
                                                            root = {
                                                                check_variable = {
                                                                    which = "anomaly_masseffect_points"
                                                                    value = 4
                                                                }
                                                            }
                                                        }
                                                        add_anomaly = MASSEFFECT_ANOMALY_CAT5
                                                        else = {
                                                            if = {
                                                                limit = {
                                                                    root = {
                                                                        check_variable = {
                                                                            which = "anomaly_masseffect_points"
                                                                            value = 5
                                                                        }
                                                                    }
                                                                }
                                                                add_anomaly = MASSEFFECT_ANOMALY_CAT6
                                                                else = {
                                                                    if = {
                                                                        limit = {
                                                                            root = {
                                                                                check_variable = {
                                                                                    which = "anomaly_masseffect_points"
                                                                                    value = 6
                                                                                }
                                                                            }
                                                                        }
                                                                        add_anomaly = MASSEFFECT_ANOMALY_CAT7
                                                                        else = {
                                                                            add_anomaly = MASSEFFECT_ANOMALY_CAT8
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                root.owner = {
                    create_point_of_interest = {
                        id = "masseffect_anomaly_location"
                        name = "masseffect_anomaly_poi"
                        desc = "masseffect_anomaly_desc"
                        event_chain = "masseffect_anomaly_chain"
                        location = prev
                    }
                }
            }
            else = {
                print_country_scope_a = yes
                random_system = {
                    limit = {
                        distance = {
                            source = event_target:masseffect_anomaly_planet
                            use_bypasses = no
                            min_jumps = 1
                            max_jumps = 6
                        }
                        is_owned_by = root
                        any_planet = {
                            OR = {
                                is_habitable_planet = yes
                                is_uninhabitable_planet = yes
                            }
                            has_anomaly = no
                            has_owner = no
                            is_colony = no
                            is_capital = no
                            is_under_colonization = no
                            is_surveyed = {
                                who = root
                                status = yes
                            }
                        }
                    }
                    log = "----- SCIENCE EVENT 8: internal system found"
                    random_system_planet = {
                        limit = {
                            OR = {
                                is_habitable_planet = yes
                                is_uninhabitable_planet = yes
                            }
                            has_anomaly = no
                            has_owner = no
                            is_colony = no
                            is_capital = no
                            is_under_colonization = no
                            is_surveyed = {
                                who = root
                                status = yes
                            }
                        }

                        if = {
                            limit = {
                                root = {
                                    check_variable = {
                                        which = "anomaly_masseffect_points"
                                        value < 1
                                    }
                                }
                            }
                            add_anomaly = MASSEFFECT_ANOMALY_CAT1
                            else = {
                                if = {
                                    limit = {
                                        root = {
                                            check_variable = {
                                                which = "anomaly_masseffect_points"
                                                value = 1
                                            }
                                        }
                                    }
                                    add_anomaly = MASSEFFECT_ANOMALY_CAT2
                                    else = {
                                        if = {
                                            limit = {
                                                root = {
                                                    check_variable = {
                                                        which = "anomaly_masseffect_points"
                                                        value = 2
                                                    }
                                                }
                                            }
                                            add_anomaly = MASSEFFECT_ANOMALY_CAT3
                                            else = {
                                                if = {
                                                    limit = {
                                                        root = {
                                                            check_variable = {
                                                                which = "anomaly_masseffect_points"
                                                                value = 3
                                                            }
                                                        }
                                                    }
                                                    add_anomaly = MASSEFFECT_ANOMALY_CAT4
                                                    else = {
                                                        if = {
                                                            limit = {
                                                                root = {
                                                                    check_variable = {
                                                                        which = "anomaly_masseffect_points"
                                                                        value = 4
                                                                    }
                                                                }
                                                            }
                                                            add_anomaly = MASSEFFECT_ANOMALY_CAT5
                                                            else = {
                                                                if = {
                                                                    limit = {
                                                                        root = {
                                                                            check_variable = {
                                                                                which = "anomaly_masseffect_points"
                                                                                value = 5
                                                                            }
                                                                        }
                                                                    }
                                                                    add_anomaly = MASSEFFECT_ANOMALY_CAT6
                                                                    else = {
                                                                        if = {
                                                                            limit = {
                                                                                root = {
                                                                                    check_variable = {
                                                                                        which = "anomaly_masseffect_points"
                                                                                        value = 6
                                                                                    }
                                                                                }
                                                                            }
                                                                            add_anomaly = MASSEFFECT_ANOMALY_CAT7
                                                                            else = {
                                                                                add_anomaly = MASSEFFECT_ANOMALY_CAT8
                                                                            }
                                                                        }
                                                                    }
                                                                }
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                    root.owner = {
                        create_point_of_interest = {
                            id = "masseffect_anomaly_location"
                            name = "masseffect_anomaly_poi"
                            desc = "masseffect_anomaly_desc"
                            event_chain = "masseffect_anomaly_chain"
                            location = prev
                        }
                    }
                }
            }
        }
    }

    option = {
        name = zog_science_events.13.a
        custom_tooltip = zog_science_events.13.a.tooltip
    }
}

country_event = {
    id = zog_science_events.14
    title = zog_science_events.14.title
    desc = zog_science_events.14.desc
    picture = GFX_evt_masseffect_completed
    show_sound = event_activating_unknown_technology
    is_triggered_only = yes
    hide_window = no

    trigger = {
        has_event_chain = "masseffect_anomaly_chain"
    }

    immediate = {
        log = "----- IN zog_science_events.14"
        print_project_scope_b = yes
    }

    option = {
        name = zog_science_events.14.a
        custom_tooltip = zog_science_events.14.a.tooltip
        hidden_effect = {
            end_event_chain = "masseffect_anomaly_chain"

            if = {
                limit = { NOT = { has_technology = "tech_theory_of_mass_effect" } }
                give_technology = { tech = "tech_theory_of_mass_effect" }
            }
            else_if = {
                limit = { NOT = { has_technology = "tech_reactor_of_mass_effect_01" } }
                give_technology = { tech = "tech_reactor_of_mass_effect_01" }
            }
            else_if = {
                limit = { NOT = { has_technology = "tech_reactor_of_mass_effect_02" } }
                give_technology = { tech = "tech_reactor_of_mass_effect_02" }
            }
            else_if = {
                limit = { NOT = { has_technology = "tech_reactor_of_mass_effect_03" } }
                give_technology = { tech = "tech_reactor_of_mass_effect_03" }
            }
            else_if = {
                limit = { NOT = { has_technology = "tech_reactor_of_mass_effect_04" } }
                give_technology = { tech = "tech_reactor_of_mass_effect_04" }
            }
            else_if = {
                limit = { NOT = { has_technology = "tech_reactor_of_mass_effect_05" } }
                add_research_option = "tech_reactor_of_mass_effect_05"
                add_tech_progress = { tech = "tech_reactor_of_mass_effect_05" progress = 0.20 }
            }
            else_if = {
                limit = { NOT = { has_technology = "tech_reactor_of_mass_effect_06" } }
                add_research_option = "tech_reactor_of_mass_effect_06"
                add_tech_progress = { tech = "tech_reactor_of_mass_effect_06" progress = 0.10 }
            }

            if = {
                limit = { NOT = { has_technology = "tech_generator_of_mass_effect_01" } }
                give_technology = { tech = "tech_generator_of_mass_effect_01" }
            }
            else_if = {
                limit = { NOT = { has_technology = "tech_generator_of_mass_effect_02" } }
                give_technology = { tech = "tech_generator_of_mass_effect_02" }
            }
            else_if = {
                limit = { NOT = { has_technology = "tech_generator_of_mass_effect_03" } }
                give_technology = { tech = "tech_generator_of_mass_effect_03" }
            }
            else_if = {
                limit = { NOT = { has_technology = "tech_generator_of_mass_effect_04" } }
                give_technology = { tech = "tech_generator_of_mass_effect_04" }
            }
            else_if = {
                limit = { NOT = { has_technology = "tech_generator_of_mass_effect_05" } }
                add_research_option = "tech_generator_of_mass_effect_05"
                add_tech_progress = { tech = "tech_generator_of_mass_effect_05" progress = 0.20 }
            }
            else_if = {
                limit = { NOT = { has_technology = "tech_generator_of_mass_effect_06" } }
                add_research_option = "tech_generator_of_mass_effect_06"
                add_tech_progress = { tech = "tech_generator_of_mass_effect_06" progress = 0.15 }
            }
            else_if = {
                limit = { NOT = { has_technology = "tech_generator_of_mass_effect_07" } }
                add_research_option = "tech_generator_of_mass_effect_07"
                add_tech_progress = { tech = "tech_generator_of_mass_effect_07" progress = 0.10 }
            }
            else_if = {
                limit = { NOT = { has_technology = "tech_generator_of_mass_effect_08" } }
                add_research_option = "tech_generator_of_mass_effect_08"
                add_tech_progress = { tech = "tech_generator_of_mass_effect_08" progress = 0.05 }
            }
        }
    }
}

country_event = {
    id = zog_science_events.15
    title = zog_science_events.15.title
    desc = zog_science_events.15.desc
    picture = GFX_evt_masseffect_extracted
    show_sound = event_construction
    is_triggered_only = yes
    hide_window = no

    trigger = {
        has_event_chain = "masseffect_anomaly_chain"
    }

    option = {
        name = zog_science_events.15.a
        custom_tooltip = zog_science_events.15.a.tooltip
        add_engineering_research = 200
    }
    option = {
        name = zog_science_events.15.b
        custom_tooltip = zog_science_events.15.b.tooltip
        add_physics_research = 200
    }
    option = {
        name = zog_science_events.15.c
        custom_tooltip = zog_science_events.15.c.tooltip
        add_engineering_research = 100
        add_physics_research = 100
    }
    option = {
        name = zog_science_events.15.d
        custom_tooltip = zog_science_events.15.d.tooltip
        add_energy = 5000
    }
}