#########################################
## Engineering / Voidcraft / Starbases
#########################################

#######################
### Starbase Offense
#######################

tech_advanced_starbase_offense_01 = {
    cost = 7500
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_offense_01"
    tier = 1

    is_reverse_engineerable = no
    is_rare = no
    is_dangerous = no

    prerequisites = {
        "tech_advanced_voidcraft"
        "tech_starbase_1"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_offense_01_prereqfor.title
            desc = tech_advanced_starbase_offense_01_prereqfor.desc
        }
    }

    modifier = {
        starbase_shipyard_build_cost_mult = -0.10
        starbase_shipyard_build_speed_mult = 0.10
        starbase_shipyard_build_time_mult = -0.10
        starbase_shipyard_capacity_add = 1
        shipclass_starbase_damage_mult = 0.10
        shipclass_starbase_hull_mult = 0.10
    }

    weight = 90

    weight_modifier = {
        modifier = {
            factor = 0
            NAND = {
                check_variable = {
                    which = "ship_corvette_built"
                    value > 19
                }
                check_variable = {
                    which = "ship_destroyer_built"
                    value > 4
                }
                check_variable = {
                    which = "ship_cruiser_built"
                    value > 0
                }
                check_variable = {
                    which = "ship_battleship_built"
                    value > 0
                }
                check_variable = {
                    which = "ship_titan_built"
                    value > 0
                }
            }
        }
        modifier = {
            factor = 0
            NOT = {
                check_variable = {
                    which = "starbase_module_shipyard_built"
                    value > 2
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_domination_adopt"
                has_valid_civic = "civic_distinguished_admiralty"
            }
        }
        modifier = {
            factor = 0.75
            NAND = {
                has_tradition = "tr_domination_star_lords"
                has_valid_civic = "civic_distinguished_admiralty"
            }
        }
        modifier = {
            factor = 1.05
            has_tradition = "tr_domination_fleet_levies"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_domination_finish"
        }
        modifier = {
            factor = 1.75
            has_ascension_perk = "ap_voidborn"
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = engineering
                has_level > 2
                OR = {
                    has_trait = "leader_trait_expertise_voidcraft"
                    has_trait = "leader_trait_scientist_chosen"
                    has_trait = "leader_trait_curator"
                }
            }
        }
        modifier = {
            factor = 1.75
            has_technology = "tech_supreme_voidcraft"
        }
    }

    ai_weight = {
        factor = 90
    }
}

tech_advanced_starbase_offense_02 = {
    cost = 15000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_offense_02"
    tier = 1

    is_reverse_engineerable = no
    is_rare = no
    is_dangerous = no

    prerequisites = {
        "tech_advanced_starbase_offense_01"
        "tech_starbase_2"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_offense_02_prereqfor.title
            desc = tech_advanced_starbase_offense_02_prereqfor.desc
        }
    }

    modifier = {
        starbase_shipyard_build_cost_mult = -0.15
        starbase_shipyard_build_speed_mult = 0.15
        starbase_shipyard_build_time_mult = -0.15
        starbase_shipyard_capacity_add = 3
        shipclass_starbase_damage_mult = 0.15
        shipclass_starbase_hull_mult = 0.15
    }

    weight = 80

    weight_modifier = {
        modifier = {
            factor = 0
            NAND = {
                check_variable = {
                    which = "ship_corvette_built"
                    value > 49
                }
                check_variable = {
                    which = "ship_destroyer_built"
                    value > 9
                }
                check_variable = {
                    which = "ship_cruiser_built"
                    value > 4
                }
                check_variable = {
                    which = "ship_battleship_built"
                    value > 0
                }
                check_variable = {
                    which = "ship_titan_built"
                    value > 0
                }
            }
        }
        modifier = {
            factor = 0
            NOT = {
                check_variable = {
                    which = "starbase_module_shipyard_built"
                    value > 5
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_domination_star_lords"
                has_valid_civic = "civic_distinguished_admiralty"
            }
        }
        modifier = {
            factor = 0.75
            NAND = {
                has_tradition = "tr_domination_fleet_levies"
                has_valid_civic = "civic_distinguished_admiralty"
            }
        }
        modifier = {
            factor = 1.05
            has_tradition = "tr_domination_finish"
        }
        modifier = {
            factor = 1.50
            has_ascension_perk = "ap_voidborn"
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = engineering
                has_level > 3
                OR = {
                    has_trait = "leader_trait_expertise_voidcraft"
                    has_trait = "leader_trait_scientist_chosen"
                    has_trait = "leader_trait_curator"
                }
            }
        }
        modifier = {
            factor = 1.50
            has_technology = "tech_supreme_voidcraft"
        }
    }

    ai_weight = {
        factor = 80
    }
}

tech_advanced_starbase_offense_03 = {
    cost = 25000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_offense_03"
    tier = 1

    is_reverse_engineerable = no
    is_rare = no
    is_dangerous = no

    prerequisites = {
        "tech_advanced_starbase_offense_02"
        "tech_starbase_3"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_offense_03_prereqfor.title
            desc = tech_advanced_starbase_offense_03_prereqfor.desc
        }
    }

    modifier = {
        starbase_shipyard_build_cost_mult = -0.20
        starbase_shipyard_build_speed_mult = 0.20
        starbase_shipyard_build_time_mult = -0.20
        starbase_shipyard_capacity_add = 5
        shipclass_starbase_damage_mult = 0.20
        shipclass_starbase_hull_mult = 0.20
    }

    weight = 70

    weight_modifier = {
        modifier = {
            factor = 0
            NAND = {
                check_variable = {
                    which = "ship_corvette_built"
                    value > 99
                }
                check_variable = {
                    which = "ship_destroyer_built"
                    value > 19
                }
                check_variable = {
                    which = "ship_cruiser_built"
                    value > 9
                }
                check_variable = {
                    which = "ship_battleship_built"
                    value > 3
                }
                check_variable = {
                    which = "ship_titan_built"
                    value > 0
                }
            }
        }
        modifier = {
            factor = 0
            NOT = {
                check_variable = {
                    which = "starbase_module_shipyard_built"
                    value > 8
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_domination_fleet_levies"
                has_valid_civic = "civic_distinguished_admiralty"
            }
        }
        modifier = {
            factor = 0.50
            NAND = {
                has_tradition = "tr_domination_finish"
                has_valid_civic = "civic_distinguished_admiralty"
            }
        }
        modifier = {
            factor = 1.25
            has_ascension_perk = "ap_voidborn"
        }
        modifier = {
            factor = 0.75
            research_leader = {
                area = engineering
                OR = {
                    has_level < 3
                    NAND = {
                        has_trait = "leader_trait_expertise_voidcraft"
                        has_trait = "leader_trait_scientist_chosen"
                        has_trait = "leader_trait_curator"
                    }
                }
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = engineering
                has_level > 4
                OR = {
                    has_trait = "leader_trait_expertise_voidcraft"
                    has_trait = "leader_trait_scientist_chosen"
                    has_trait = "leader_trait_curator"
                }
            }
        }
        modifier = {
            factor = 1.25
            has_technology = "tech_supreme_voidcraft"
        }
    }

    ai_weight = {
        factor = 70
    }
}

tech_advanced_starbase_offense_04 = {
    cost = 40000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_offense_04"
    tier = 2

    is_reverse_engineerable = no
    is_rare = yes
    is_dangerous = no

    prerequisites = {
        "tech_advanced_starbase_offense_03"
        "tech_starbase_4"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_offense_04_prereqfor.title
            desc = tech_advanced_starbase_offense_04_prereqfor.desc
        }
    }

    modifier = {
        starbase_shipyard_build_cost_mult = -0.25
        starbase_shipyard_build_speed_mult = 0.25
        starbase_shipyard_build_time_mult = -0.25
        starbase_shipyard_capacity_add = 7
        shipclass_starbase_damage_mult = 0.25
        shipclass_starbase_hull_mult = 0.25
    }

    weight = 60

    weight_modifier = {
        modifier = {
            factor = 0
            NAND = {
                check_variable = {
                    which = "ship_corvette_built"
                    value > 199
                }
                check_variable = {
                    which = "ship_destroyer_built"
                    value > 49
                }
                check_variable = {
                    which = "ship_cruiser_built"
                    value > 19
                }
                check_variable = {
                    which = "ship_battleship_built"
                    value > 9
                }
                check_variable = {
                    which = "ship_titan_built"
                    value > 0
                }
            }
        }
        modifier = {
            factor = 0
            NOT = {
                check_variable = {
                    which = "starbase_module_shipyard_built"
                    value > 11
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_domination_finish"
                has_valid_civic = "civic_distinguished_admiralty"
            }
        }
        modifier = {
            factor = 0.75
            NOT = {
                has_ascension_perk = "ap_voidborn"
            }
        }
        modifier = {
            factor = 0
            research_leader = {
                area = engineering
                OR = {
                    has_level < 3
                    NAND = {
                        has_trait = "leader_trait_expertise_voidcraft"
                        has_trait = "leader_trait_scientist_chosen"
                        has_trait = "leader_trait_curator"
                    }
                }
            }
        }
        modifier = {
            factor = 0.75
            research_leader = {
                area = engineering
                has_level = 4
            }
        }
        modifier = {
            factor = 1.05
            research_leader = {
                area = engineering
                has_level > 4
            }
        }
        modifier = {
            factor = 0.75
            NOT = {
                has_technology = "tech_supreme_voidcraft"
            }
        }
    }

    ai_weight = {
        factor = 60
    }
}

tech_advanced_starbase_offense_05 = {
    cost = 60000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_offense_05"
    tier = 2

    is_reverse_engineerable = no
    is_rare = yes
    is_dangerous = yes

    prerequisites = {
        "tech_advanced_starbase_offense_04"
        "tech_starbase_5"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_offense_05_prereqfor.title
            desc = tech_advanced_starbase_offense_05_prereqfor.desc
        }
    }

    modifier = {
        starbase_shipyard_build_cost_mult = -0.30
        starbase_shipyard_build_speed_mult = 0.30
        starbase_shipyard_build_time_mult = -0.30
        starbase_shipyard_capacity_add = 10
        shipclass_starbase_damage_mult = 0.30
        shipclass_starbase_hull_mult = 0.30
    }

    weight = 50

    weight_modifier = {
        modifier = {
            factor = 0
            NAND = {
                check_variable = {
                    which = "ship_corvette_built"
                    value > 499
                }
                check_variable = {
                    which = "ship_destroyer_built"
                    value > 99
                }
                check_variable = {
                    which = "ship_cruiser_built"
                    value > 49
                }
                check_variable = {
                    which = "ship_battleship_built"
                    value > 19
                }
                check_variable = {
                    which = "ship_titan_built"
                    value > 0
                }
            }
        }
        modifier = {
            factor = 0
            NOT = {
                check_variable = {
                    which = "starbase_module_shipyard_built"
                    value > 14
                }
            }
        }
        modifier = {
            factor = 0
            NOT = {
                has_tradition = "tr_domination_finish"
            }
        }
        modifier = {
            factor = 0
            NOT = {
                has_ascension_perk = "ap_voidborn"
            }
        }
        modifier = {
            factor = 0
            research_leader = {
                area = engineering
                OR = {
                    has_level < 4
                    NAND = {
                        has_trait = "leader_trait_expertise_voidcraft"
                        has_trait = "leader_trait_scientist_chosen"
                        has_trait = "leader_trait_curator"
                    }
                }
            }
        }
        modifier = {
            factor = 0.50
            NOT = {
                has_technology = "tech_supreme_voidcraft"
            }
        }
    }

    ai_weight = {
        factor = 50
    }
}

#######################
### Starbase Defence
#######################

tech_advanced_starbase_defence_01 = {
    cost = 7500
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_defence_01"
    tier = 1

    is_reverse_engineerable = no
    is_rare = no
    is_dangerous = no

    prerequisites = {
        "tech_advanced_voidcraft"
        "tech_starbase_1"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_defence_01_prereqfor.title
            desc = tech_advanced_starbase_defence_01_prereqfor.desc
        }
    }

    modifier = {
        starbase_defense_platform_capacity_add = 1
        starbase_defensive_war_ship_build_speed_mult = 0.10
        shipsize_starbase_outpost_build_cost_mult = -0.10
        country_starbase_capacity_add = 1
        country_starbase_upkeep_mult = -0.10
        country_starbase_influence_cost_mult = -0.10
    }

    weight = 90

    weight_modifier = {
        modifier = {
            factor = 0
            NAND = {
                count_starbase_sizes = {
                    starbase_size = "starbase_outpost"
                    count > 5
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_starport"
                    count > 1
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_starhold"
                    count > 0
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_starfortress"
                    count > 0
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_citadel"
                    count > 0
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                check_variable = {
                    which = "starbase_module_gun_battery_built"
                    value > 2
                }
                check_variable = {
                    which = "starbase_module_missile_battery_built"
                    value > 2
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_supremacy_adopt"
                has_valid_civic = "civic_distinguished_admiralty"
            }
        }
        modifier = {
            factor = 0.75
            NAND = {
                has_tradition = "tr_supremacy_master_shipwrights"
                has_valid_civic = "civic_distinguished_admiralty"
            }
        }
        modifier = {
            factor = 1.05
            has_tradition = "tr_supremacy_great_game"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_supremacy_finish"
        }
        modifier = {
            factor = 1.75
            has_ascension_perk = "ap_eternal_vigilance"
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = engineering
                has_level > 2
                OR = {
                    has_trait = "leader_trait_expertise_voidcraft"
                    has_trait = "leader_trait_scientist_chosen"
                    has_trait = "leader_trait_curator"
                }
            }
        }
        modifier = {
            factor = 1.75
            has_technology = "tech_supreme_voidcraft"
        }
    }

    ai_weight = {
        factor = 90
    }
}

tech_advanced_starbase_defence_02 = {
    cost = 15000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_defence_02"
    tier = 1

    is_reverse_engineerable = no
    is_rare = no
    is_dangerous = no

    prerequisites = {
        "tech_advanced_starbase_defence_01"
        "tech_starbase_2"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_defence_02_prereqfor.title
            desc = tech_advanced_starbase_defence_02_prereqfor.desc
        }
    }

    modifier = {
        starbase_defense_platform_capacity_add = 2
        starbase_defensive_war_ship_build_speed_mult = 0.15
        shipsize_starbase_outpost_build_cost_mult = -0.15
        country_starbase_capacity_add = 2
        country_starbase_upkeep_mult = -0.15
        country_starbase_influence_cost_mult = -0.15
    }

    weight = 80

    weight_modifier = {
        modifier = {
            factor = 0
            NAND = {
                count_starbase_sizes = {
                    starbase_size = "starbase_outpost"
                    count > 11
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_starport"
                    count > 5
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_starhold"
                    count > 0
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_starfortress"
                    count > 0
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_citadel"
                    count > 0
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                check_variable = {
                    which = "starbase_module_gun_battery_built"
                    value > 5
                }
                check_variable = {
                    which = "starbase_module_missile_battery_built"
                    value > 5
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_supremacy_master_shipwrights"
                has_valid_civic = "civic_distinguished_admiralty"
            }
        }
        modifier = {
            factor = 0.75
            NAND = {
                has_tradition = "tr_supremacy_great_game"
                has_valid_civic = "civic_distinguished_admiralty"
            }
        }
        modifier = {
            factor = 1.05
            has_tradition = "tr_supremacy_finish"
        }
        modifier = {
            factor = 1.50
            has_ascension_perk = "ap_eternal_vigilance"
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = engineering
                has_level > 3
                OR = {
                    has_trait = "leader_trait_expertise_voidcraft"
                    has_trait = "leader_trait_scientist_chosen"
                    has_trait = "leader_trait_curator"
                }
            }
        }
        modifier = {
            factor = 1.50
            has_technology = "tech_supreme_voidcraft"
        }
    }

    ai_weight = {
        factor = 80
    }
}

tech_advanced_starbase_defence_03 = {
    cost = 25000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_defence_03"
    tier = 1

    is_reverse_engineerable = no
    is_rare = no
    is_dangerous = no

    prerequisites = {
        "tech_advanced_starbase_defence_02"
        "tech_starbase_3"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_defence_03_prereqfor.title
            desc = tech_advanced_starbase_defence_03_prereqfor.desc
        }
    }

    modifier = {
        starbase_defense_platform_capacity_add = 3
        starbase_defensive_war_ship_build_speed_mult = 0.20
        shipsize_starbase_outpost_build_cost_mult = -0.20
        country_starbase_capacity_add = 3
        country_starbase_upkeep_mult = -0.20
        country_starbase_influence_cost_mult = -0.20
    }

    weight = 70

    weight_modifier = {
        modifier = {
            factor = 0
            NAND = {
                count_starbase_sizes = {
                    starbase_size = "starbase_outpost"
                    count > 17
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_starport"
                    count > 11
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_starhold"
                    count > 5
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_starfortress"
                    count > 0
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_citadel"
                    count > 0
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                check_variable = {
                    which = "starbase_module_gun_battery_built"
                    value > 8
                }
                check_variable = {
                    which = "starbase_module_missile_battery_built"
                    value > 8
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_supremacy_great_game"
                has_valid_civic = "civic_distinguished_admiralty"
            }
        }
        modifier = {
            factor = 0.50
            NAND = {
                has_tradition = "tr_supremacy_finish"
                has_valid_civic = "civic_distinguished_admiralty"
            }
        }
        modifier = {
            factor = 1.25
            has_ascension_perk = "ap_eternal_vigilance"
        }
        modifier = {
            factor = 0.75
            research_leader = {
                area = engineering
                OR = {
                    has_level < 3
                    NAND = {
                        has_trait = "leader_trait_expertise_voidcraft"
                        has_trait = "leader_trait_scientist_chosen"
                        has_trait = "leader_trait_curator"
                    }
                }
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = engineering
                has_level > 4
                OR = {
                    has_trait = "leader_trait_expertise_voidcraft"
                    has_trait = "leader_trait_scientist_chosen"
                    has_trait = "leader_trait_curator"
                }
            }
        }
        modifier = {
            factor = 1.25
            has_technology = "tech_supreme_voidcraft"
        }
    }

    ai_weight = {
        factor = 70
    }
}

tech_advanced_starbase_defence_04 = {
    cost = 40000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_defence_04"
    tier = 2

    is_reverse_engineerable = no
    is_rare = yes
    is_dangerous = no

    prerequisites = {
        "tech_advanced_starbase_defence_03"
        "tech_starbase_4"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_defence_04_prereqfor.title
            desc = tech_advanced_starbase_defence_04_prereqfor.desc
        }
    }

    modifier = {
        starbase_defense_platform_capacity_add = 4
        starbase_defensive_war_ship_build_speed_mult = 0.25
        shipsize_starbase_outpost_build_cost_mult = -0.25
        country_starbase_capacity_add = 4
        country_starbase_upkeep_mult = -0.25
        country_starbase_influence_cost_mult = -0.25
    }

    weight = 60

    weight_modifier = {
        modifier = {
            factor = 0
            NAND = {
                count_starbase_sizes = {
                    starbase_size = "starbase_outpost"
                    count > 23
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_starport"
                    count > 17
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_starhold"
                    count > 11
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_starfortress"
                    count > 5
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_citadel"
                    count > 0
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                check_variable = {
                    which = "starbase_module_gun_battery_built"
                    value > 11
                }
                check_variable = {
                    which = "starbase_module_missile_battery_built"
                    value > 11
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_supremacy_finish"
                has_valid_civic = "civic_distinguished_admiralty"
            }
        }
        modifier = {
            factor = 0.75
            NOT = {
                has_ascension_perk = "ap_eternal_vigilance"
            }
        }
        modifier = {
            factor = 0
            research_leader = {
                area = engineering
                OR = {
                    has_level < 3
                    NAND = {
                        has_trait = "leader_trait_expertise_voidcraft"
                        has_trait = "leader_trait_scientist_chosen"
                        has_trait = "leader_trait_curator"
                    }
                }
            }
        }
        modifier = {
            factor = 0.75
            research_leader = {
                area = engineering
                has_level = 4
            }
        }
        modifier = {
            factor = 1.05
            research_leader = {
                area = engineering
                has_level > 4
            }
        }
        modifier = {
            factor = 0.75
            NOT = {
                has_technology = "tech_supreme_voidcraft"
            }
        }
    }

    ai_weight = {
        factor = 60
    }
}

tech_advanced_starbase_defence_05 = {
    cost = 60000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_defence_05"
    tier = 2

    is_reverse_engineerable = no
    is_rare = yes
    is_dangerous = yes

    prerequisites = {
        "tech_advanced_starbase_defence_04"
        "tech_starbase_5"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_defence_05_prereqfor.title
            desc = tech_advanced_starbase_defence_05_prereqfor.desc
        }
    }

    modifier = {
        starbase_defense_platform_capacity_add = 5
        starbase_defensive_war_ship_build_speed_mult = 0.30
        shipsize_starbase_outpost_build_cost_mult = -0.30
        country_starbase_capacity_add = 5
        country_starbase_upkeep_mult = -0.30
        country_starbase_influence_cost_mult = -0.30
    }

    weight = 50

    weight_modifier = {
        modifier = {
            factor = 0
            NAND = {
                count_starbase_sizes = {
                    starbase_size = "starbase_outpost"
                    count > 29
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_starport"
                    count > 23
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_starhold"
                    count > 17
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_starfortress"
                    count > 11
                }
                count_starbase_sizes = {
                    starbase_size = "starbase_citadel"
                    count > 5
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                check_variable = {
                    which = "starbase_module_gun_battery_built"
                    value > 14
                }
                check_variable = {
                    which = "starbase_module_missile_battery_built"
                    value > 14
                }
            }
        }
        modifier = {
            factor = 0
            NOT = {
                has_tradition = "tr_supremacy_finish"
            }
        }
        modifier = {
            factor = 0
            NOT = {
                has_ascension_perk = "ap_eternal_vigilance"
            }
        }
        modifier = {
            factor = 0
            research_leader = {
                area = engineering
                OR = {
                    has_level < 4
                    NAND = {
                        has_trait = "leader_trait_expertise_voidcraft"
                        has_trait = "leader_trait_scientist_chosen"
                        has_trait = "leader_trait_curator"
                    }
                }
            }
        }
        modifier = {
            factor = 0.50
            NOT = {
                has_technology = "tech_supreme_voidcraft"
            }
        }
    }

    ai_weight = {
        factor = 50
    }
}

############################
### Starbase Construction
############################

tech_advanced_starbase_construction_01 = {
    cost = 5000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_construction_01"
    tier = 1

    is_reverse_engineerable = no
    is_rare = no
    is_dangerous = no

    prerequisites = {
        "tech_advanced_voidcraft"
        "tech_starbase_1"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_construction_01_prereqfor.title
            desc = tech_advanced_starbase_construction_01_prereqfor.desc
        }
    }

    modifier = {
        starbase_upgrade_speed_mult = 0.10
        starbase_upgrade_cost_mult = -0.10
    }

    weight = 90

    weight_modifier = {
        modifier = {
            factor = 0
            NOR = {
                check_variable = {
                    which = "ship_civilian_built"
                    value > 5
                }
                check_variable = {
                    which = "ship_colonizer_built"
                    value > 2
                }
                check_variable = {
                    which = "ship_transport_built"
                    value > 9
                }
                check_variable = {
                    which = "ship_military_built"
                    value > 15
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_expansion_adopt"
                has_valid_civic = "civic_mechanists"
            }
        }
        modifier = {
            factor = 0.75
            NAND = {
                has_tradition = "tr_expansion_reach_for_the_stars"
                has_valid_civic = "civic_mechanists"
            }
        }
        modifier = {
            factor = 1.05
            has_tradition = "tr_expansion_galactic_ambition"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_expansion_finish"
        }
        modifier = {
            factor = 1.75
            has_ascension_perk = "ap_galactic_wonders"
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = engineering
                has_level > 2
                OR = {
                    has_trait = "leader_trait_expertise_voidcraft"
                    has_trait = "leader_trait_scientist_chosen"
                    has_trait = "leader_trait_curator"
                }
            }
        }
        modifier = {
            factor = 1.75
            has_technology = "tech_supreme_voidcraft"
        }
    }

    ai_weight = {
        factor = 90
    }
}

tech_advanced_starbase_construction_02 = {
    cost = 10000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_construction_02"
    tier = 1

    is_reverse_engineerable = no
    is_rare = no
    is_dangerous = no

    prerequisites = {
        "tech_advanced_starbase_construction_01"
        "tech_starbase_2"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_construction_02_prereqfor.title
            desc = tech_advanced_starbase_construction_02_prereqfor.desc
        }
    }

    modifier = {
        starbase_upgrade_speed_mult = 0.15
        starbase_upgrade_cost_mult = -0.15
    }

    weight = 80

    weight_modifier = {
        modifier = {
            factor = 0
            NOR = {
                check_variable = {
                    which = "ship_civilian_built"
                    value > 6
                }
                check_variable = {
                    which = "ship_colonizer_built"
                    value > 5
                }
                check_variable = {
                    which = "ship_transport_built"
                    value > 15
                }
                check_variable = {
                    which = "ship_military_built"
                    value > 20
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_expansion_reach_for_the_stars"
                has_valid_civic = "civic_mechanists"
            }
        }
        modifier = {
            factor = 0.75
            NAND = {
                has_tradition = "tr_expansion_galactic_ambition"
                has_valid_civic = "civic_mechanists"
            }
        }
        modifier = {
            factor = 1.05
            has_tradition = "tr_expansion_finish"
        }
        modifier = {
            factor = 1.50
            has_ascension_perk = "ap_galactic_wonders"
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = engineering
                has_level > 3
                OR = {
                    has_trait = "leader_trait_expertise_voidcraft"
                    has_trait = "leader_trait_scientist_chosen"
                    has_trait = "leader_trait_curator"
                }
            }
        }
        modifier = {
            factor = 1.50
            has_technology = "tech_supreme_voidcraft"
        }
    }

    ai_weight = {
        factor = 80
    }
}

tech_advanced_starbase_construction_03 = {
    cost = 15000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_construction_03"
    tier = 1

    is_reverse_engineerable = no
    is_rare = no
    is_dangerous = no

    prerequisites = {
        "tech_advanced_starbase_construction_02"
        "tech_starbase_3"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_construction_03_prereqfor.title
            desc = tech_advanced_starbase_construction_03_prereqfor.desc
        }
    }

    modifier = {
        starbase_upgrade_speed_mult = 0.20
        starbase_upgrade_cost_mult = -0.20
    }

    weight = 70

    weight_modifier = {
        modifier = {
            factor = 0
            NOR = {
                check_variable = {
                    which = "ship_civilian_built"
                    value > 7
                }
                check_variable = {
                    which = "ship_colonizer_built"
                    value > 7
                }
                check_variable = {
                    which = "ship_transport_built"
                    value > 19
                }
                check_variable = {
                    which = "ship_military_built"
                    value > 30
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_expansion_galactic_ambition"
                has_valid_civic = "civic_mechanists"
            }
        }
        modifier = {
            factor = 0.75
            NAND = {
                has_tradition = "tr_expansion_finish"
                has_valid_civic = "civic_mechanists"
            }
        }
        modifier = {
            factor = 1.25
            has_ascension_perk = "ap_galactic_wonders"
        }
        modifier = {
            factor = 0.75
            research_leader = {
                area = engineering
                OR = {
                    has_level < 3
                    NAND = {
                        has_trait = "leader_trait_expertise_voidcraft"
                        has_trait = "leader_trait_scientist_chosen"
                        has_trait = "leader_trait_curator"
                    }
                }
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = engineering
                has_level > 4
                OR = {
                    has_trait = "leader_trait_expertise_voidcraft"
                    has_trait = "leader_trait_scientist_chosen"
                    has_trait = "leader_trait_curator"
                }
            }
        }
        modifier = {
            factor = 1.25
            has_technology = "tech_supreme_voidcraft"
        }
    }

    ai_weight = {
        factor = 70
    }
}

tech_advanced_starbase_construction_04 = {
    cost = 30000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_construction_04"
    tier = 2

    is_reverse_engineerable = no
    is_rare = yes
    is_dangerous = no

    prerequisites = {
        "tech_advanced_starbase_construction_03"
        "tech_starbase_4"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_construction_04_prereqfor.title
            desc = tech_advanced_starbase_construction_04_prereqfor.desc
        }
    }

    modifier = {
        starbase_upgrade_speed_mult = 0.25
        starbase_upgrade_cost_mult = -0.25
    }

    weight = 60

    weight_modifier = {
        modifier = {
            factor = 0
            NOR = {
                check_variable = {
                    which = "ship_civilian_built"
                    value > 8
                }
                check_variable = {
                    which = "ship_colonizer_built"
                    value > 9
                }
                check_variable = {
                    which = "ship_transport_built"
                    value > 24
                }
                check_variable = {
                    which = "ship_military_built"
                    value > 45
                }
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_expansion_finish"
                has_valid_civic = "civic_mechanists"
            }
        }
        modifier = {
            factor = 0.75
            NOT = {
                has_ascension_perk = "ap_galactic_wonders"
            }
        }
        modifier = {
            factor = 0
            research_leader = {
                area = engineering
                OR = {
                    has_level < 3
                    NAND = {
                        has_trait = "leader_trait_expertise_voidcraft"
                        has_trait = "leader_trait_scientist_chosen"
                        has_trait = "leader_trait_curator"
                    }
                }
            }
        }
        modifier = {
            factor = 0.75
            research_leader = {
                area = engineering
                has_level = 4
            }
        }
        modifier = {
            factor = 1.05
            research_leader = {
                area = engineering
                has_level > 4
            }
        }
        modifier = {
            factor = 0.75
            NOT = {
                has_technology = "tech_supreme_voidcraft"
            }
        }
    }

    ai_weight = {
        factor = 60
    }
}

tech_advanced_starbase_construction_05 = {
    cost = 50000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_construction_05"
    tier = 2

    is_reverse_engineerable = no
    is_rare = yes
    is_dangerous = yes

    prerequisites = {
        "tech_advanced_starbase_construction_04"
        "tech_starbase_5"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_construction_05_prereqfor.title
            desc = tech_advanced_starbase_construction_05_prereqfor.desc
        }
    }

    modifier = {
        starbase_upgrade_speed_mult = 0.30
        starbase_upgrade_cost_mult = -0.30
    }

    weight = 50

    weight_modifier = {
        modifier = {
            factor = 0
            NOR = {
                check_variable = {
                    which = "ship_civilian_built"
                    value > 9
                }
                check_variable = {
                    which = "ship_colonizer_built"
                    value > 11
                }
                check_variable = {
                    which = "ship_transport_built"
                    value > 29
                }
                check_variable = {
                    which = "ship_military_built"
                    value > 75
                }
            }
        }
        modifier = {
            factor = 0
            NOT = {
                has_tradition = "tr_expansion_finish"
            }
        }
        modifier = {
            factor = 0
            NOT = {
                has_ascension_perk = "ap_galactic_wonders"
            }
        }
        modifier = {
            factor = 0
            research_leader = {
                area = engineering
                OR = {
                    has_level < 4
                    NAND = {
                        has_trait = "leader_trait_expertise_voidcraft"
                        has_trait = "leader_trait_scientist_chosen"
                        has_trait = "leader_trait_curator"
                    }
                }
            }
        }
        modifier = {
            factor = 0.50
            NOT = {
                has_technology = "tech_supreme_voidcraft"
            }
        }
    }

    ai_weight = {
        factor = 50
    }
}

#######################
### Starbase Modules
#######################

tech_advanced_starbase_module_01 = {
    cost = 5000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_module_01"
    tier = 1

    is_reverse_engineerable = no
    is_rare = no
    is_dangerous = no

    prerequisites = {
        "tech_advanced_voidcraft"
        "tech_starbase_1"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_module_01_prereqfor.title
            desc = tech_advanced_starbase_module_01_prereqfor.desc
        }
    }

    modifier = {
        starbase_module_build_cost_mult = -0.10
        starbase_module_capacity_add = 1
    }

    weight = 90

    weight_modifier = {
        modifier = {
            factor = 0
            check_variable = {
                which = "starbase_module_built"
                value < 6
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_prosperity_adopt"
                has_valid_civic = "civic_functional_architecture"
            }
        }
        modifier = {
            factor = 0.75
            NAND = {
                has_tradition = "tr_prosperity_sct"
                has_valid_civic = "civic_functional_architecture"
            }
        }
        modifier = {
            factor = 1.05
            has_tradition = "tr_prosperity_administrative_operations"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_prosperity_finish"
        }
        modifier = {
            factor = 1.75
            has_ascension_perk = "ap_master_builders"
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = engineering
                has_level > 2
                OR = {
                    has_trait = "leader_trait_expertise_voidcraft"
                    has_trait = "leader_trait_scientist_chosen"
                    has_trait = "leader_trait_curator"
                }
            }
        }
        modifier = {
            factor = 1.75
            has_technology = "tech_supreme_voidcraft"
        }
    }

    ai_weight = {
        factor = 90
    }
}

tech_advanced_starbase_module_02 = {
    cost = 10000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_module_02"
    tier = 1

    is_reverse_engineerable = no
    is_rare = no
    is_dangerous = no

    prerequisites = {
        "tech_advanced_starbase_module_01"
        "tech_starbase_2"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_module_02_prereqfor.title
            desc = tech_advanced_starbase_module_02_prereqfor.desc
        }
    }

    modifier = {
        starbase_module_build_cost_mult = -0.15
        starbase_module_capacity_add = 1
    }

    weight = 80

    weight_modifier = {
        modifier = {
            factor = 0
            check_variable = {
                which = "starbase_module_built"
                value < 10
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_prosperity_sct"
                has_valid_civic = "civic_functional_architecture"
            }
        }
        modifier = {
            factor = 0.75
            NAND = {
                has_tradition = "tr_prosperity_administrative_operations"
                has_valid_civic = "civic_functional_architecture"
            }
        }
        modifier = {
            factor = 1.05
            has_tradition = "tr_prosperity_finish"
        }
        modifier = {
            factor = 1.50
            has_ascension_perk = "ap_master_builders"
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = engineering
                has_level > 3
                OR = {
                    has_trait = "leader_trait_expertise_voidcraft"
                    has_trait = "leader_trait_scientist_chosen"
                    has_trait = "leader_trait_curator"
                }
            }
        }
        modifier = {
            factor = 1.50
            has_technology = "tech_supreme_voidcraft"
        }
    }

    ai_weight = {
        factor = 80
    }
}

tech_advanced_starbase_module_03 = {
    cost = 15000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_module_03"
    tier = 1

    is_reverse_engineerable = no
    is_rare = no
    is_dangerous = no

    prerequisites = {
        "tech_advanced_starbase_module_02"
        "tech_modular_engineering"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_module_03_prereqfor.title
            desc = tech_advanced_starbase_module_03_prereqfor.desc
        }
    }

    modifier = {
        starbase_module_build_cost_mult = -0.20
        starbase_module_capacity_add = 2
    }

    weight = 70

    weight_modifier = {
        modifier = {
            factor = 0
            check_variable = {
                which = "starbase_module_built"
                value < 20
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_prosperity_administrative_operations"
                has_valid_civic = "civic_functional_architecture"
            }
        }
        modifier = {
            factor = 0.50
            NAND = {
                has_tradition = "tr_prosperity_finish"
                has_valid_civic = "civic_functional_architecture"
            }
        }
        modifier = {
            factor = 1.25
            has_ascension_perk = "ap_master_builders"
        }
        modifier = {
            factor = 0.75
            research_leader = {
                area = engineering
                OR = {
                    has_level < 3
                    NAND = {
                        has_trait = "leader_trait_expertise_voidcraft"
                        has_trait = "leader_trait_scientist_chosen"
                        has_trait = "leader_trait_curator"
                    }
                }
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = engineering
                has_level > 4
                OR = {
                    has_trait = "leader_trait_expertise_voidcraft"
                    has_trait = "leader_trait_scientist_chosen"
                    has_trait = "leader_trait_curator"
                }
            }
        }
        modifier = {
            factor = 1.25
            has_technology = "tech_supreme_voidcraft"
        }
    }

    ai_weight = {
        factor = 70
    }
}

tech_advanced_starbase_module_04 = {
    cost = 25000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_module_04"
    tier = 1

    is_reverse_engineerable = no
    is_rare = yes
    is_dangerous = no

    prerequisites = {
        "tech_advanced_starbase_module_03"
        "tech_space_defense_station_improvement"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_module_04_prereqfor.title
            desc = tech_advanced_starbase_module_04_prereqfor.desc
        }
    }

    modifier = {
        starbase_module_build_cost_mult = -0.25
        starbase_module_capacity_add = 2
    }

    weight = 60

    weight_modifier = {
        modifier = {
            factor = 0
            check_variable = {
                which = "starbase_module_built"
                value < 30
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_prosperity_finish"
                has_valid_civic = "civic_functional_architecture"
            }
        }
        modifier = {
            factor = 0.75
            NOT = {
                has_ascension_perk = "ap_master_builders"
            }
        }
        modifier = {
            factor = 0
            research_leader = {
                area = engineering
                OR = {
                    has_level < 3
                    NAND = {
                        has_trait = "leader_trait_expertise_voidcraft"
                        has_trait = "leader_trait_scientist_chosen"
                        has_trait = "leader_trait_curator"
                    }
                }
            }
        }
        modifier = {
            factor = 0.75
            research_leader = {
                area = engineering
                has_level = 4
            }
        }
        modifier = {
            factor = 1.05
            research_leader = {
                area = engineering
                has_level > 4
            }
        }
        modifier = {
            factor = 0.75
            NOT = {
                has_technology = "tech_supreme_voidcraft"
            }
        }
    }

    ai_weight = {
        factor = 60
    }
}

tech_advanced_starbase_module_05 = {
    cost = 30000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_module_05"
    tier = 1

    is_reverse_engineerable = no
    is_rare = yes
    is_dangerous = yes

    prerequisites = {
        "tech_advanced_starbase_module_04"
        "tech_starbase_5"
        "tech_space_defense_station_improvement"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_module_05_prereqfor.title
            desc = tech_advanced_starbase_module_05_prereqfor.desc
        }
    }

    modifier = {
        starbase_module_build_cost_mult = -0.30
        starbase_module_capacity_add = 3
    }

    weight = 50

    weight_modifier = {
        modifier = {
            factor = 0
            check_variable = {
                which = "starbase_module_built"
                value < 50
            }
        }
        modifier = {
            factor = 0
            NOT = {
                has_tradition = "tr_prosperity_finish"
            }
        }
        modifier = {
            factor = 0
            NOT = {
                has_ascension_perk = "ap_master_builders"
            }
        }
        modifier = {
            factor = 0
            research_leader = {
                area = engineering
                OR = {
                    has_level < 4
                    NAND = {
                        has_trait = "leader_trait_expertise_voidcraft"
                        has_trait = "leader_trait_scientist_chosen"
                        has_trait = "leader_trait_curator"
                    }
                }
            }
        }
        modifier = {
            factor = 0.50
            NOT = {
                has_technology = "tech_supreme_voidcraft"
            }
        }
    }

    ai_weight = {
        factor = 50
    }
}

#########################
### Starbase Buildings
#########################

tech_advanced_starbase_building_01 = {
    cost = 5000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_building_01"
    tier = 1

    is_reverse_engineerable = no
    is_rare = no
    is_dangerous = no

    prerequisites = {
        "tech_advanced_voidcraft"
        "tech_starbase_1"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_building_01_prereqfor.title
            desc = tech_advanced_starbase_building_01_prereqfor.desc
        }
    }

    modifier = {
        starbase_building_build_cost_mult = -0.10
        starbase_building_capacity_add = 1
    }

    weight = 90

    weight_modifier = {
        modifier = {
            factor = 0
            check_variable = {
                which = "starbase_building_built"
                value < 3
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_prosperity_adopt"
                has_valid_civic = "civic_functional_architecture"
            }
        }
        modifier = {
            factor = 0.75
            NAND = {
                has_tradition = "tr_prosperity_sct"
                has_valid_civic = "civic_functional_architecture"
            }
        }
        modifier = {
            factor = 1.05
            has_tradition = "tr_prosperity_administrative_operations"
        }
        modifier = {
            factor = 1.25
            has_tradition = "tr_prosperity_finish"
        }
        modifier = {
            factor = 1.75
            has_ascension_perk = "ap_master_builders"
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = engineering
                has_level > 2
                OR = {
                    has_trait = "leader_trait_expertise_voidcraft"
                    has_trait = "leader_trait_scientist_chosen"
                    has_trait = "leader_trait_curator"
                }
            }
        }
        modifier = {
            factor = 1.75
            has_technology = "tech_supreme_voidcraft"
        }
    }

    ai_weight = {
        factor = 90
    }
}

tech_advanced_starbase_building_02 = {
    cost = 10000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_building_02"
    tier = 1

    is_reverse_engineerable = no
    is_rare = no
    is_dangerous = no

    prerequisites = {
        "tech_advanced_starbase_building_01"
        "tech_starbase_2"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_building_02_prereqfor.title
            desc = tech_advanced_starbase_building_02_prereqfor.desc
        }
    }

    modifier = {
        starbase_building_build_cost_mult = -0.15
        starbase_building_capacity_add = 1
    }

    weight = 80

    weight_modifier = {
        modifier = {
            factor = 0
            check_variable = {
                which = "starbase_building_built"
                value < 6
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_prosperity_sct"
                has_valid_civic = "civic_functional_architecture"
            }
        }
        modifier = {
            factor = 0.75
            NAND = {
                has_tradition = "tr_prosperity_administrative_operations"
                has_valid_civic = "civic_functional_architecture"
            }
        }
        modifier = {
            factor = 1.05
            has_tradition = "tr_prosperity_finish"
        }
        modifier = {
            factor = 1.50
            has_ascension_perk = "ap_master_builders"
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = engineering
                has_level > 3
                OR = {
                    has_trait = "leader_trait_expertise_voidcraft"
                    has_trait = "leader_trait_scientist_chosen"
                    has_trait = "leader_trait_curator"
                }
            }
        }
        modifier = {
            factor = 1.50
            has_technology = "tech_supreme_voidcraft"
        }
    }

    ai_weight = {
        factor = 80
    }
}

tech_advanced_starbase_building_03 = {
    cost = 15000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_building_03"
    tier = 1

    is_reverse_engineerable = no
    is_rare = no
    is_dangerous = no

    prerequisites = {
        "tech_advanced_starbase_building_02"
        "tech_modular_engineering"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_building_03_prereqfor.title
            desc = tech_advanced_starbase_building_03_prereqfor.desc
        }
    }

    modifier = {
        starbase_building_build_cost_mult = -0.20
        starbase_building_capacity_add = 2
    }

    weight = 70

    weight_modifier = {
        modifier = {
            factor = 0
            check_variable = {
                which = "starbase_building_built"
                value < 12
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_prosperity_administrative_operations"
                has_valid_civic = "civic_functional_architecture"
            }
        }
        modifier = {
            factor = 0.50
            NAND = {
                has_tradition = "tr_prosperity_finish"
                has_valid_civic = "civic_functional_architecture"
            }
        }
        modifier = {
            factor = 1.25
            has_ascension_perk = "ap_master_builders"
        }
        modifier = {
            factor = 0.75
            research_leader = {
                area = engineering
                OR = {
                    has_level < 3
                    NAND = {
                        has_trait = "leader_trait_expertise_voidcraft"
                        has_trait = "leader_trait_scientist_chosen"
                        has_trait = "leader_trait_curator"
                    }
                }
            }
        }
        modifier = {
            factor = 1.25
            research_leader = {
                area = engineering
                has_level > 4
                OR = {
                    has_trait = "leader_trait_expertise_voidcraft"
                    has_trait = "leader_trait_scientist_chosen"
                    has_trait = "leader_trait_curator"
                }
            }
        }
        modifier = {
            factor = 1.25
            has_technology = "tech_supreme_voidcraft"
        }
    }

    ai_weight = {
        factor = 70
    }
}

tech_advanced_starbase_building_04 = {
    cost = 25000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_building_04"
    tier = 1

    is_reverse_engineerable = no
    is_rare = yes
    is_dangerous = no

    prerequisites = {
        "tech_advanced_starbase_building_03"
        "tech_space_defense_station_improvement"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_building_04_prereqfor.title
            desc = tech_advanced_starbase_building_04_prereqfor.desc
        }
    }

    modifier = {
        starbase_building_build_cost_mult = -0.25
        starbase_building_capacity_add = 2
    }

    weight = 60

    weight_modifier = {
        modifier = {
            factor = 0
            check_variable = {
                which = "starbase_building_built"
                value < 20
            }
        }
        modifier = {
            factor = 0
            NAND = {
                has_tradition = "tr_prosperity_finish"
                has_valid_civic = "civic_functional_architecture"
            }
        }
        modifier = {
            factor = 0.75
            NOT = {
                has_ascension_perk = "ap_master_builders"
            }
        }
        modifier = {
            factor = 0
            research_leader = {
                area = engineering
                OR = {
                    has_level < 3
                    NAND = {
                        has_trait = "leader_trait_expertise_voidcraft"
                        has_trait = "leader_trait_scientist_chosen"
                        has_trait = "leader_trait_curator"
                    }
                }
            }
        }
        modifier = {
            factor = 0.75
            research_leader = {
                area = engineering
                has_level = 4
            }
        }
        modifier = {
            factor = 1.05
            research_leader = {
                area = engineering
                has_level > 4
            }
        }
        modifier = {
            factor = 0.75
            NOT = {
                has_technology = "tech_supreme_voidcraft"
            }
        }
    }

    ai_weight = {
        factor = 60
    }
}

tech_advanced_starbase_building_05 = {
    cost = 30000
    area = engineering
    start_tech = no
    category = { voidcraft }
    icon = "tech_advanced_starbase_building_05"
    tier = 1

    is_reverse_engineerable = no
    is_rare = yes
    is_dangerous = yes

    prerequisites = {
        "tech_advanced_starbase_building_04"
        "tech_starbase_5"
        "tech_space_defense_station_improvement"
    }

    prereqfor_desc = {
        feature = {
            title = tech_advanced_starbase_building_05_prereqfor.title
            desc = tech_advanced_starbase_building_05_prereqfor.desc
        }
    }

    modifier = {
        starbase_building_build_cost_mult = -0.30
        starbase_building_capacity_add = 3
    }

    weight = 50

    weight_modifier = {
        modifier = {
            factor = 0
            check_variable = {
                which = "starbase_building_built"
                value < 30
            }
        }
        modifier = {
            factor = 0
            NOT = {
                has_tradition = "tr_prosperity_finish"
            }
        }
        modifier = {
            factor = 0
            NOT = {
                has_ascension_perk = "ap_master_builders"
            }
        }
        modifier = {
            factor = 0
            research_leader = {
                area = engineering
                OR = {
                    has_level < 4
                    NAND = {
                        has_trait = "leader_trait_expertise_voidcraft"
                        has_trait = "leader_trait_scientist_chosen"
                        has_trait = "leader_trait_curator"
                    }
                }
            }
        }
        modifier = {
            factor = 0.50
            NOT = {
                has_technology = "tech_supreme_voidcraft"
            }
        }
    }

    ai_weight = {
        factor = 50
    }
}