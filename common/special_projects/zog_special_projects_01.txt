special_project = {
    key = "ZOG_PROJECT_SPECIES_RESEARCH_A"
    cost = {
        base = 26
        scaled_modifier = {
            limit = {
                is_robot_pop = no
                is_same_species = from.owner
            }
            scope = this
            add = -1
            calc = pop_count
        }
    }
    days_to_research = 0
    timelimit = -1
    tech_department = society_technology
    picture = GFX_evt_species_research_they
    icon = "gfx/interface/icons/situation_log/situation_log_planet.dds"

    event_scope = planet_event

    requirements = {
        #shipclass_science_ship = 1
        #leader = scientist
        #skill = 2
    }

    on_start = {
        if = {
            limit = {
                count_pops = {
                    count > 1
                    limit = {
                        is_growing = no
                        is_robot_pop = no
                        is_same_species = from.owner
                    }
                }
            }
            random_pop = {
                limit = {
                    is_growing = no
                    is_robot_pop = no
                    is_same_species = from.owner
                }
                kill_pop = yes
            }
            if = {
                limit = {
                    NOT = { has_modifier = "scared_population" }
                }
                add_modifier = {
                    modifier = scared_population
                    days = 360
                }
            }
            planet_event = { id = zog_planet_events.190 }
        }
    }

    # Scope Planet
    on_success = {
        fromfrom = {
            save_event_target_as = zog_project_neighbor
        }
        from.owner = {
            save_event_target_as = zog_project_owner
        }

        event_target:zog_project_owner = {
            if = {
                limit = {
                    has_country_flag = "IS_species_researched"
                }
                remove_country_flag = "IS_species_researched"
            }

            switch = {
                trigger = is_species_class
                HUM = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "HUM_species_researched" } }
                            set_country_flag = "HUM_species_researched"
                            country_event = { id = zog_planet_events.201 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
                MAM = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "MAM_species_researched" } }
                            set_country_flag = "MAM_species_researched"
                            country_event = { id = zog_planet_events.202 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
                REP = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "REP_species_researched" } }
                            set_country_flag = "REP_species_researched"
                            country_event = { id = zog_planet_events.203 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
                AVI = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "AVI_species_researched" } }
                            set_country_flag = "AVI_species_researched"
                            country_event = { id = zog_planet_events.204 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
                ART = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "ART_species_researched" } }
                            set_country_flag = "ART_species_researched"
                            country_event = { id = zog_planet_events.205 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
                FUN = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "FUN_species_researched" } }
                            set_country_flag = "FUN_species_researched"
                            country_event = { id = zog_planet_events.206 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
                MOL = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "MOL_species_researched" } }
                            set_country_flag = "MOL_species_researched"
                            country_event = { id = zog_planet_events.207 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
                PLANT = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "PLANT_species_researched" } }
                            set_country_flag = "PLANT_species_researched"
                            country_event = { id = zog_planet_events.208 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
            }

            if = {
                limit = {
                    has_country_flag = "IS_species_researched"
                }
                remove_country_flag = "IS_species_researched"
                else = {
                    event_target:zog_project_neighbor = { country_event = { id = zog_planet_events.200 } }
                }
            }

            random_list = {
                99 = {
                    event_target:zog_project_neighbor = { country_event = { id = zog_planet_events.218 days = 15 random = 15 } }
                    event_target:zog_project_owner = {
                        create_message = { 
                            type = DIPLO_ACTION_MAKE_RIVAL
                            localization = DIPLO_SPECIES_PROJECT_FAILED
                            days = 30 
                            target = event_target:zog_project_owner
                            variable = { type = name localization = COUNTRY1 scope = event_target:zog_project_owner }
                            variable = { type = name localization = COUNTRY2 scope = event_target:zog_project_neighbor }
                        }
                    }
                }
                1 = {}
            }
        }
    }

    on_fail = {
        fromfrom = {
            save_event_target_as = zog_project_neighbor
        }
        from.owner = {
            save_event_target_as = zog_project_owner
        }

        event_target:zog_project_owner = {
            random_list = {
                50 = {
                    event_target:zog_project_neighbor = { country_event = { id = zog_planet_events.218 days = 10 random = 10 } }
                }
                50 = {}
            }
        }
    }
}

special_project = {
    key = "ZOG_PROJECT_SPECIES_RESEARCH_B"
    cost = {
        base = 26
        scaled_modifier = {
            limit = {
                is_robot_pop = no
                is_same_species = from.owner
            }
            scope = this
            add = -1
            calc = pop_count
        }
    }
    days_to_research = 0
    timelimit = -1
    tech_department = society_technology
    picture = GFX_evt_species_research_we
    icon = "gfx/interface/icons/situation_log/situation_log_planet.dds"

    event_scope = planet_event

    requirements = {
        #shipclass_science_ship = 1
        #leader = scientist
        #skill = 2
    }

    on_start = {
        if = {
            limit = {
                count_pops = {
                    count > 1
                    limit = {
                        is_growing = no
                        is_robot_pop = no
                        is_same_species = from.owner
                    }
                }
            }
            random_pop = {
                limit = {
                    is_growing = no
                    is_robot_pop = no
                    is_same_species = from.owner
                }
                kill_pop = yes
            }
            planet_event = { id = zog_planet_events.190 }
            else = {
                from.owner = {
                    random_owned_leader = {
                        limit = {
                            OR = {
                                is_researching_area = engineering 
                                is_researching_area = physics 
                                is_researching_area = society
                            }
                        }
                        kill_leader = {
                            type = scientist
                            show_notification = yes
                        }
                    }
                    country_event = { id = zog_planet_events.191 }
                }
            }
        }

        if = {
            limit = {
                NOT = { has_modifier = "scared_population" }
            }
            add_modifier = {
                modifier = scared_population
                days = 360
            }
        }
    }

    # Scope Planet
    on_success = {
        fromfromfrom = {
            save_event_target_as = zog_project_neighbor
        }
        from.owner = {
            save_event_target_as = zog_project_owner
        }

        event_target:zog_project_owner = {
            if = {
                limit = {
                    has_country_flag = "IS_species_researched"
                }
                remove_country_flag = "IS_species_researched"
            }

            switch = {
                trigger = is_species_class
                HUM = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "HUM_species_researched" } }
                            set_country_flag = "HUM_species_researched"
                            country_event = { id = zog_planet_events.201 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
                MAM = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "MAM_species_researched" } }
                            set_country_flag = "MAM_species_researched"
                            country_event = { id = zog_planet_events.202 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
                REP = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "REP_species_researched" } }
                            set_country_flag = "REP_species_researched"
                            country_event = { id = zog_planet_events.203 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
                AVI = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "AVI_species_researched" } }
                            set_country_flag = "AVI_species_researched"
                            country_event = { id = zog_planet_events.204 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
                ART = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "ART_species_researched" } }
                            set_country_flag = "ART_species_researched"
                            country_event = { id = zog_planet_events.205 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
                FUN = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "FUN_species_researched" } }
                            set_country_flag = "FUN_species_researched"
                            country_event = { id = zog_planet_events.206 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
                MOL = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "MOL_species_researched" } }
                            set_country_flag = "MOL_species_researched"
                            country_event = { id = zog_planet_events.207 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
                PLANT = {
                    event_target:zog_project_neighbor = {
                        if = {
                            limit = { NOT = { has_country_flag = "PLANT_species_researched" } }
                            set_country_flag = "PLANT_species_researched"
                            country_event = { id = zog_planet_events.208 }
                            event_target:zog_project_owner = { set_country_flag = "IS_species_researched" }
                        }
                    }
                }
            }

            if = {
                limit = {
                    has_country_flag = "IS_species_researched"
                }
                remove_country_flag = "IS_species_researched"
                else = {
                    event_target:zog_project_neighbor = { country_event = { id = zog_planet_events.200 } }
                }
            }

            random_list = {
                99 = {
                    event_target:zog_project_neighbor = { country_event = { id = zog_planet_events.219 days = 15 random = 15 } }
                    event_target:zog_project_owner = {
                        create_message = { 
                            type = DIPLO_ACTION_MAKE_RIVAL
                            localization = DIPLO_SPECIES_PROJECT_FAILED
                            days = 30 
                            target = event_target:zog_project_owner
                            variable = { type = name localization = COUNTRY1 scope = event_target:zog_project_owner }
                            variable = { type = name localization = COUNTRY2 scope = event_target:zog_project_neighbor }
                        }
                    }
                }
                1 = {}
            }
        }
    }

    on_fail = {
        fromfromfrom = {
            save_event_target_as = zog_project_neighbor
        }
        from.owner = {
            save_event_target_as = zog_project_owner
        }

        event_target:zog_project_owner = {
            random_list = {
                50 = {
                    event_target:zog_project_neighbor = { country_event = { id = zog_planet_events.219 days = 10 random = 10 } }
                }
                50 = {}
            }
        }
    }
}